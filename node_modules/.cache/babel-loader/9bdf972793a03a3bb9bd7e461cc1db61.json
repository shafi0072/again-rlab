{"ast":null,"code":"import _pt from \"prop-types\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useContext, useMemo } from 'react';\nimport { coerceNumber } from '@visx/scale';\nimport DataContext from '../../../context/DataContext';\nimport getScaleBandwidth from '../../../utils/getScaleBandwidth';\nimport isValidNumber from '../../../typeguards/isValidNumber'; // used for auto-positioning\n\nvar minimumLabelDimension = 16;\nexport default function BaseAnnotation(_ref) {\n  var _coerceNumber, _coerceNumber2;\n\n  var AnnotationComponent = _ref.AnnotationComponent,\n      children = _ref.children,\n      datum = _ref.datum,\n      dataKey = _ref.dataKey,\n      propsXAccessor = _ref.xAccessor,\n      propsYAccessor = _ref.yAccessor,\n      _ref$dx = _ref.dx,\n      propsDx = _ref$dx === void 0 ? 0 : _ref$dx,\n      _ref$dy = _ref.dy,\n      propsDy = _ref$dy === void 0 ? 0 : _ref$dy,\n      annotationProps = _objectWithoutPropertiesLoose(_ref, [\"AnnotationComponent\", \"children\", \"datum\", \"dataKey\", \"xAccessor\", \"yAccessor\", \"dx\", \"dy\"]);\n\n  var _ref2 = useContext(DataContext) || {},\n      innerHeight = _ref2.innerHeight,\n      innerWidth = _ref2.innerWidth,\n      margin = _ref2.margin,\n      xScale = _ref2.xScale,\n      yScale = _ref2.yScale,\n      dataRegistry = _ref2.dataRegistry;\n\n  var xBandWidth = useMemo(function () {\n    return xScale ? getScaleBandwidth(xScale) : 0;\n  }, [xScale]);\n  var yBandWidth = useMemo(function () {\n    return yScale ? getScaleBandwidth(yScale) : 0;\n  }, [yScale]);\n\n  if ((!propsXAccessor || !propsYAccessor) && !dataKey) {\n    console.warn('[@visx/xychart/BaseAnnotation]: dataKey or x/yAccessors must be specified.');\n    return null;\n  }\n\n  var registryEntry = propsXAccessor && propsYAccessor || dataKey == null ? null : dataRegistry == null ? void 0 : dataRegistry.get(dataKey);\n  var xAccessor = propsXAccessor || (registryEntry == null ? void 0 : registryEntry.xAccessor);\n  var yAccessor = propsYAccessor || (registryEntry == null ? void 0 : registryEntry.yAccessor);\n\n  if (!xScale || !yScale || !innerWidth || !innerHeight || !xAccessor || !yAccessor || !margin) {\n    return null;\n  }\n\n  var x = ((_coerceNumber = coerceNumber(xScale(xAccessor(datum)))) != null ? _coerceNumber : NaN) + xBandWidth / 2;\n  var y = ((_coerceNumber2 = coerceNumber(yScale(yAccessor(datum)))) != null ? _coerceNumber2 : NaN) + yBandWidth / 2;\n  var dx = x + propsDx + minimumLabelDimension > margin.left + innerWidth ? -propsDx : propsDx;\n  var dy = y + propsDy + minimumLabelDimension > margin.top + innerHeight ? -propsDy : propsDy;\n  return isValidNumber(x) && isValidNumber(y) ? /*#__PURE__*/React.createElement(AnnotationComponent, _extends({\n    width: innerWidth,\n    height: innerHeight\n  }, annotationProps, {\n    x: x,\n    y: y,\n    dx: dx,\n    dy: dy\n  }), children) : null;\n}\nBaseAnnotation.propTypes = {\n  dataKey: _pt.string,\n  xAccessor: _pt.func,\n  yAccessor: _pt.func\n};","map":{"version":3,"sources":["C:/remotePackRlab-acab49ee44aa8f06acbfc147116dbc3387885161/node_modules/@visx/xychart/esm/components/annotation/private/BaseAnnotation.js"],"names":["_pt","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","useContext","useMemo","coerceNumber","DataContext","getScaleBandwidth","isValidNumber","minimumLabelDimension","BaseAnnotation","_ref","_coerceNumber","_coerceNumber2","AnnotationComponent","children","datum","dataKey","propsXAccessor","xAccessor","propsYAccessor","yAccessor","_ref$dx","dx","propsDx","_ref$dy","dy","propsDy","annotationProps","_ref2","innerHeight","innerWidth","margin","xScale","yScale","dataRegistry","xBandWidth","yBandWidth","console","warn","registryEntry","get","x","NaN","y","left","top","createElement","width","height","propTypes","string","func"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,YAAhB;;AAEA,SAASC,QAAT,GAAoB;AAAEA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,UAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,WAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,YAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,UAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,WAAOL,MAAP;AAAgB,GAA5P;;AAA8P,SAAOH,QAAQ,CAACY,KAAT,CAAe,IAAf,EAAqBP,SAArB,CAAP;AAAyC;;AAE7T,SAASQ,6BAAT,CAAuCN,MAAvC,EAA+CO,QAA/C,EAAyD;AAAE,MAAIP,MAAM,IAAI,IAAd,EAAoB,OAAO,EAAP;AAAW,MAAIJ,MAAM,GAAG,EAAb;AAAiB,MAAIY,UAAU,GAAGd,MAAM,CAACe,IAAP,CAAYT,MAAZ,CAAjB;AAAsC,MAAIC,GAAJ,EAASJ,CAAT;;AAAY,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGW,UAAU,CAACT,MAA3B,EAAmCF,CAAC,EAApC,EAAwC;AAAEI,IAAAA,GAAG,GAAGO,UAAU,CAACX,CAAD,CAAhB;AAAqB,QAAIU,QAAQ,CAACG,OAAT,CAAiBT,GAAjB,KAAyB,CAA7B,EAAgC;AAAUL,IAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;;AAAC,SAAOL,MAAP;AAAgB;;AAEnT,OAAOe,KAAP,IAAgBC,UAAhB,EAA4BC,OAA5B,QAA2C,OAA3C;AACA,SAASC,YAAT,QAA6B,aAA7B;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,OAAOC,aAAP,MAA0B,mCAA1B,C,CACA;;AACA,IAAIC,qBAAqB,GAAG,EAA5B;AACA,eAAe,SAASC,cAAT,CAAwBC,IAAxB,EAA8B;AAC3C,MAAIC,aAAJ,EAAmBC,cAAnB;;AAEA,MAAIC,mBAAmB,GAAGH,IAAI,CAACG,mBAA/B;AAAA,MACIC,QAAQ,GAAGJ,IAAI,CAACI,QADpB;AAAA,MAEIC,KAAK,GAAGL,IAAI,CAACK,KAFjB;AAAA,MAGIC,OAAO,GAAGN,IAAI,CAACM,OAHnB;AAAA,MAIIC,cAAc,GAAGP,IAAI,CAACQ,SAJ1B;AAAA,MAKIC,cAAc,GAAGT,IAAI,CAACU,SAL1B;AAAA,MAMIC,OAAO,GAAGX,IAAI,CAACY,EANnB;AAAA,MAOIC,OAAO,GAAGF,OAAO,KAAK,KAAK,CAAjB,GAAqB,CAArB,GAAyBA,OAPvC;AAAA,MAQIG,OAAO,GAAGd,IAAI,CAACe,EARnB;AAAA,MASIC,OAAO,GAAGF,OAAO,KAAK,KAAK,CAAjB,GAAqB,CAArB,GAAyBA,OATvC;AAAA,MAUIG,eAAe,GAAG/B,6BAA6B,CAACc,IAAD,EAAO,CAAC,qBAAD,EAAwB,UAAxB,EAAoC,OAApC,EAA6C,SAA7C,EAAwD,WAAxD,EAAqE,WAArE,EAAkF,IAAlF,EAAwF,IAAxF,CAAP,CAVnD;;AAYA,MAAIkB,KAAK,GAAG1B,UAAU,CAACG,WAAD,CAAV,IAA2B,EAAvC;AAAA,MACIwB,WAAW,GAAGD,KAAK,CAACC,WADxB;AAAA,MAEIC,UAAU,GAAGF,KAAK,CAACE,UAFvB;AAAA,MAGIC,MAAM,GAAGH,KAAK,CAACG,MAHnB;AAAA,MAIIC,MAAM,GAAGJ,KAAK,CAACI,MAJnB;AAAA,MAKIC,MAAM,GAAGL,KAAK,CAACK,MALnB;AAAA,MAMIC,YAAY,GAAGN,KAAK,CAACM,YANzB;;AAQA,MAAIC,UAAU,GAAGhC,OAAO,CAAC,YAAY;AACnC,WAAO6B,MAAM,GAAG1B,iBAAiB,CAAC0B,MAAD,CAApB,GAA+B,CAA5C;AACD,GAFuB,EAErB,CAACA,MAAD,CAFqB,CAAxB;AAGA,MAAII,UAAU,GAAGjC,OAAO,CAAC,YAAY;AACnC,WAAO8B,MAAM,GAAG3B,iBAAiB,CAAC2B,MAAD,CAApB,GAA+B,CAA5C;AACD,GAFuB,EAErB,CAACA,MAAD,CAFqB,CAAxB;;AAIA,MAAI,CAAC,CAAChB,cAAD,IAAmB,CAACE,cAArB,KAAwC,CAACH,OAA7C,EAAsD;AACpDqB,IAAAA,OAAO,CAACC,IAAR,CAAa,4EAAb;AACA,WAAO,IAAP;AACD;;AAED,MAAIC,aAAa,GAAGtB,cAAc,IAAIE,cAAlB,IAAoCH,OAAO,IAAI,IAA/C,GAAsD,IAAtD,GAA6DkB,YAAY,IAAI,IAAhB,GAAuB,KAAK,CAA5B,GAAgCA,YAAY,CAACM,GAAb,CAAiBxB,OAAjB,CAAjH;AACA,MAAIE,SAAS,GAAGD,cAAc,KAAKsB,aAAa,IAAI,IAAjB,GAAwB,KAAK,CAA7B,GAAiCA,aAAa,CAACrB,SAApD,CAA9B;AACA,MAAIE,SAAS,GAAGD,cAAc,KAAKoB,aAAa,IAAI,IAAjB,GAAwB,KAAK,CAA7B,GAAiCA,aAAa,CAACnB,SAApD,CAA9B;;AAEA,MAAI,CAACY,MAAD,IAAW,CAACC,MAAZ,IAAsB,CAACH,UAAvB,IAAqC,CAACD,WAAtC,IAAqD,CAACX,SAAtD,IAAmE,CAACE,SAApE,IAAiF,CAACW,MAAtF,EAA8F;AAC5F,WAAO,IAAP;AACD;;AAED,MAAIU,CAAC,GAAG,CAAC,CAAC9B,aAAa,GAAGP,YAAY,CAAC4B,MAAM,CAACd,SAAS,CAACH,KAAD,CAAV,CAAP,CAA7B,KAA4D,IAA5D,GAAmEJ,aAAnE,GAAmF+B,GAApF,IAA2FP,UAAU,GAAG,CAAhH;AACA,MAAIQ,CAAC,GAAG,CAAC,CAAC/B,cAAc,GAAGR,YAAY,CAAC6B,MAAM,CAACb,SAAS,CAACL,KAAD,CAAV,CAAP,CAA9B,KAA6D,IAA7D,GAAoEH,cAApE,GAAqF8B,GAAtF,IAA6FN,UAAU,GAAG,CAAlH;AACA,MAAId,EAAE,GAAGmB,CAAC,GAAGlB,OAAJ,GAAcf,qBAAd,GAAsCuB,MAAM,CAACa,IAAP,GAAcd,UAApD,GAAiE,CAACP,OAAlE,GAA4EA,OAArF;AACA,MAAIE,EAAE,GAAGkB,CAAC,GAAGjB,OAAJ,GAAclB,qBAAd,GAAsCuB,MAAM,CAACc,GAAP,GAAahB,WAAnD,GAAiE,CAACH,OAAlE,GAA4EA,OAArF;AACA,SAAOnB,aAAa,CAACkC,CAAD,CAAb,IAAoBlC,aAAa,CAACoC,CAAD,CAAjC,GAAuC,aAAa1C,KAAK,CAAC6C,aAAN,CAAoBjC,mBAApB,EAAyC9B,QAAQ,CAAC;AAC3GgE,IAAAA,KAAK,EAAEjB,UADoG;AAE3GkB,IAAAA,MAAM,EAAEnB;AAFmG,GAAD,EAGzGF,eAHyG,EAGxF;AAClBc,IAAAA,CAAC,EAAEA,CADe;AAElBE,IAAAA,CAAC,EAAEA,CAFe;AAGlBrB,IAAAA,EAAE,EAAEA,EAHc;AAIlBG,IAAAA,EAAE,EAAEA;AAJc,GAHwF,CAAjD,EAQvDX,QARuD,CAApD,GAQS,IARhB;AASD;AACDL,cAAc,CAACwC,SAAf,GAA2B;AACzBjC,EAAAA,OAAO,EAAElC,GAAG,CAACoE,MADY;AAEzBhC,EAAAA,SAAS,EAAEpC,GAAG,CAACqE,IAFU;AAGzB/B,EAAAA,SAAS,EAAEtC,GAAG,CAACqE;AAHU,CAA3B","sourcesContent":["import _pt from \"prop-types\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useContext, useMemo } from 'react';\nimport { coerceNumber } from '@visx/scale';\nimport DataContext from '../../../context/DataContext';\nimport getScaleBandwidth from '../../../utils/getScaleBandwidth';\nimport isValidNumber from '../../../typeguards/isValidNumber';\n// used for auto-positioning\nvar minimumLabelDimension = 16;\nexport default function BaseAnnotation(_ref) {\n  var _coerceNumber, _coerceNumber2;\n\n  var AnnotationComponent = _ref.AnnotationComponent,\n      children = _ref.children,\n      datum = _ref.datum,\n      dataKey = _ref.dataKey,\n      propsXAccessor = _ref.xAccessor,\n      propsYAccessor = _ref.yAccessor,\n      _ref$dx = _ref.dx,\n      propsDx = _ref$dx === void 0 ? 0 : _ref$dx,\n      _ref$dy = _ref.dy,\n      propsDy = _ref$dy === void 0 ? 0 : _ref$dy,\n      annotationProps = _objectWithoutPropertiesLoose(_ref, [\"AnnotationComponent\", \"children\", \"datum\", \"dataKey\", \"xAccessor\", \"yAccessor\", \"dx\", \"dy\"]);\n\n  var _ref2 = useContext(DataContext) || {},\n      innerHeight = _ref2.innerHeight,\n      innerWidth = _ref2.innerWidth,\n      margin = _ref2.margin,\n      xScale = _ref2.xScale,\n      yScale = _ref2.yScale,\n      dataRegistry = _ref2.dataRegistry;\n\n  var xBandWidth = useMemo(function () {\n    return xScale ? getScaleBandwidth(xScale) : 0;\n  }, [xScale]);\n  var yBandWidth = useMemo(function () {\n    return yScale ? getScaleBandwidth(yScale) : 0;\n  }, [yScale]);\n\n  if ((!propsXAccessor || !propsYAccessor) && !dataKey) {\n    console.warn('[@visx/xychart/BaseAnnotation]: dataKey or x/yAccessors must be specified.');\n    return null;\n  }\n\n  var registryEntry = propsXAccessor && propsYAccessor || dataKey == null ? null : dataRegistry == null ? void 0 : dataRegistry.get(dataKey);\n  var xAccessor = propsXAccessor || (registryEntry == null ? void 0 : registryEntry.xAccessor);\n  var yAccessor = propsYAccessor || (registryEntry == null ? void 0 : registryEntry.yAccessor);\n\n  if (!xScale || !yScale || !innerWidth || !innerHeight || !xAccessor || !yAccessor || !margin) {\n    return null;\n  }\n\n  var x = ((_coerceNumber = coerceNumber(xScale(xAccessor(datum)))) != null ? _coerceNumber : NaN) + xBandWidth / 2;\n  var y = ((_coerceNumber2 = coerceNumber(yScale(yAccessor(datum)))) != null ? _coerceNumber2 : NaN) + yBandWidth / 2;\n  var dx = x + propsDx + minimumLabelDimension > margin.left + innerWidth ? -propsDx : propsDx;\n  var dy = y + propsDy + minimumLabelDimension > margin.top + innerHeight ? -propsDy : propsDy;\n  return isValidNumber(x) && isValidNumber(y) ? /*#__PURE__*/React.createElement(AnnotationComponent, _extends({\n    width: innerWidth,\n    height: innerHeight\n  }, annotationProps, {\n    x: x,\n    y: y,\n    dx: dx,\n    dy: dy\n  }), children) : null;\n}\nBaseAnnotation.propTypes = {\n  dataKey: _pt.string,\n  xAccessor: _pt.func,\n  yAccessor: _pt.func\n};"]},"metadata":{},"sourceType":"module"}