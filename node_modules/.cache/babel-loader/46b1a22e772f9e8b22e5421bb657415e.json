{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = useText;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reduceCssCalc = _interopRequireDefault(require(\"reduce-css-calc\"));\n\nvar _getStringWidth = _interopRequireDefault(require(\"../util/getStringWidth\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\nfunction isXOrYInValid(xOrY) {\n  return (// number that is not NaN or Infinity\n    typeof xOrY === 'number' && Number.isFinite(xOrY) || // for percentage\n    typeof xOrY === 'string'\n  );\n}\n\nfunction useText(props) {\n  var _props$verticalAnchor = props.verticalAnchor,\n      verticalAnchor = _props$verticalAnchor === void 0 ? 'end' : _props$verticalAnchor,\n      _props$scaleToFit = props.scaleToFit,\n      scaleToFit = _props$scaleToFit === void 0 ? false : _props$scaleToFit,\n      angle = props.angle,\n      width = props.width,\n      _props$lineHeight = props.lineHeight,\n      lineHeight = _props$lineHeight === void 0 ? '1em' : _props$lineHeight,\n      _props$capHeight = props.capHeight,\n      capHeight = _props$capHeight === void 0 ? '0.71em' : _props$capHeight,\n      children = props.children,\n      style = props.style,\n      textProps = _objectWithoutPropertiesLoose(props, [\"verticalAnchor\", \"scaleToFit\", \"angle\", \"width\", \"lineHeight\", \"capHeight\", \"children\", \"style\"]);\n\n  var _textProps$x = textProps.x,\n      x = _textProps$x === void 0 ? 0 : _textProps$x,\n      _textProps$y = textProps.y,\n      y = _textProps$y === void 0 ? 0 : _textProps$y;\n  var isXOrYNotValid = !isXOrYInValid(x) || !isXOrYInValid(y);\n\n  var _useMemo = (0, _react.useMemo)(function () {\n    var words = children == null ? [] : children.toString().split(/(?:(?!\\u00A0+)\\s+)/);\n    return {\n      wordsWithWidth: words.map(function (word) {\n        return {\n          word: word,\n          wordWidth: (0, _getStringWidth.default)(word, style) || 0\n        };\n      }),\n      spaceWidth: (0, _getStringWidth.default)(\"\\xA0\", style) || 0\n    };\n  }, [children, style]),\n      wordsWithWidth = _useMemo.wordsWithWidth,\n      spaceWidth = _useMemo.spaceWidth;\n\n  var wordsByLines = (0, _react.useMemo)(function () {\n    if (isXOrYNotValid) {\n      return [];\n    } // Only perform calculations if using features that require them (multiline, scaleToFit)\n\n\n    if (width || scaleToFit) {\n      return wordsWithWidth.reduce(function (result, _ref) {\n        var word = _ref.word,\n            wordWidth = _ref.wordWidth;\n        var currentLine = result[result.length - 1];\n\n        if (currentLine && (width == null || scaleToFit || (currentLine.width || 0) + wordWidth + spaceWidth < width)) {\n          // Word can be added to an existing line\n          currentLine.words.push(word);\n          currentLine.width = currentLine.width || 0;\n          currentLine.width += wordWidth + spaceWidth;\n        } else {\n          // Add first word to line or word is too long to scaleToFit on existing line\n          var newLine = {\n            words: [word],\n            width: wordWidth\n          };\n          result.push(newLine);\n        }\n\n        return result;\n      }, []);\n    }\n\n    return [{\n      words: children == null ? [] : children.toString().split(/(?:(?!\\u00A0+)\\s+)/)\n    }];\n  }, [isXOrYNotValid, width, scaleToFit, children, wordsWithWidth, spaceWidth]);\n  var startDy = (0, _react.useMemo)(function () {\n    var startDyStr = isXOrYNotValid ? '' : verticalAnchor === 'start' ? (0, _reduceCssCalc.default)(\"calc(\" + capHeight + \")\") : verticalAnchor === 'middle' ? (0, _reduceCssCalc.default)(\"calc(\" + (wordsByLines.length - 1) / 2 + \" * -\" + lineHeight + \" + (\" + capHeight + \" / 2))\") : (0, _reduceCssCalc.default)(\"calc(\" + (wordsByLines.length - 1) + \" * -\" + lineHeight + \")\");\n    return startDyStr;\n  }, [isXOrYNotValid, verticalAnchor, capHeight, wordsByLines.length, lineHeight]);\n  var transform = (0, _react.useMemo)(function () {\n    var transforms = [];\n\n    if (isXOrYNotValid) {\n      return '';\n    }\n\n    if (isNumber(x) && isNumber(y) && isNumber(width) && scaleToFit && wordsByLines.length > 0) {\n      var lineWidth = wordsByLines[0].width || 1;\n      var sx = width / lineWidth;\n      var sy = sx;\n      var originX = x - sx * x;\n      var originY = y - sy * y;\n      transforms.push(\"matrix(\" + sx + \", 0, 0, \" + sy + \", \" + originX + \", \" + originY + \")\");\n    }\n\n    if (angle) {\n      transforms.push(\"rotate(\" + angle + \", \" + x + \", \" + y + \")\");\n    }\n\n    return transforms.length > 0 ? transforms.join(' ') : '';\n  }, [isXOrYNotValid, x, y, width, scaleToFit, wordsByLines, angle]);\n  return {\n    wordsByLines: wordsByLines,\n    startDy: startDy,\n    transform: transform\n  };\n}","map":{"version":3,"sources":["C:/remotePackRlab-acab49ee44aa8f06acbfc147116dbc3387885161/node_modules/@visx/text/lib/hooks/useText.js"],"names":["exports","__esModule","default","useText","_react","_interopRequireWildcard","require","_reduceCssCalc","_interopRequireDefault","_getStringWidth","obj","_getRequireWildcardCache","WeakMap","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","keys","i","length","indexOf","isNumber","val","isXOrYInValid","xOrY","Number","isFinite","props","_props$verticalAnchor","verticalAnchor","_props$scaleToFit","scaleToFit","angle","width","_props$lineHeight","lineHeight","_props$capHeight","capHeight","children","style","textProps","_textProps$x","x","_textProps$y","y","isXOrYNotValid","_useMemo","useMemo","words","toString","split","wordsWithWidth","map","word","wordWidth","spaceWidth","wordsByLines","reduce","result","_ref","currentLine","push","newLine","startDy","startDyStr","transform","transforms","lineWidth","sx","sy","originX","originY","join"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = useText;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reduceCssCalc = _interopRequireDefault(require(\"reduce-css-calc\"));\n\nvar _getStringWidth = _interopRequireDefault(require(\"../util/getStringWidth\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\nfunction isXOrYInValid(xOrY) {\n  return (// number that is not NaN or Infinity\n    typeof xOrY === 'number' && Number.isFinite(xOrY) || // for percentage\n    typeof xOrY === 'string'\n  );\n}\n\nfunction useText(props) {\n  var _props$verticalAnchor = props.verticalAnchor,\n      verticalAnchor = _props$verticalAnchor === void 0 ? 'end' : _props$verticalAnchor,\n      _props$scaleToFit = props.scaleToFit,\n      scaleToFit = _props$scaleToFit === void 0 ? false : _props$scaleToFit,\n      angle = props.angle,\n      width = props.width,\n      _props$lineHeight = props.lineHeight,\n      lineHeight = _props$lineHeight === void 0 ? '1em' : _props$lineHeight,\n      _props$capHeight = props.capHeight,\n      capHeight = _props$capHeight === void 0 ? '0.71em' : _props$capHeight,\n      children = props.children,\n      style = props.style,\n      textProps = _objectWithoutPropertiesLoose(props, [\"verticalAnchor\", \"scaleToFit\", \"angle\", \"width\", \"lineHeight\", \"capHeight\", \"children\", \"style\"]);\n\n  var _textProps$x = textProps.x,\n      x = _textProps$x === void 0 ? 0 : _textProps$x,\n      _textProps$y = textProps.y,\n      y = _textProps$y === void 0 ? 0 : _textProps$y;\n  var isXOrYNotValid = !isXOrYInValid(x) || !isXOrYInValid(y);\n\n  var _useMemo = (0, _react.useMemo)(function () {\n    var words = children == null ? [] : children.toString().split(/(?:(?!\\u00A0+)\\s+)/);\n    return {\n      wordsWithWidth: words.map(function (word) {\n        return {\n          word: word,\n          wordWidth: (0, _getStringWidth.default)(word, style) || 0\n        };\n      }),\n      spaceWidth: (0, _getStringWidth.default)(\"\\xA0\", style) || 0\n    };\n  }, [children, style]),\n      wordsWithWidth = _useMemo.wordsWithWidth,\n      spaceWidth = _useMemo.spaceWidth;\n\n  var wordsByLines = (0, _react.useMemo)(function () {\n    if (isXOrYNotValid) {\n      return [];\n    } // Only perform calculations if using features that require them (multiline, scaleToFit)\n\n\n    if (width || scaleToFit) {\n      return wordsWithWidth.reduce(function (result, _ref) {\n        var word = _ref.word,\n            wordWidth = _ref.wordWidth;\n        var currentLine = result[result.length - 1];\n\n        if (currentLine && (width == null || scaleToFit || (currentLine.width || 0) + wordWidth + spaceWidth < width)) {\n          // Word can be added to an existing line\n          currentLine.words.push(word);\n          currentLine.width = currentLine.width || 0;\n          currentLine.width += wordWidth + spaceWidth;\n        } else {\n          // Add first word to line or word is too long to scaleToFit on existing line\n          var newLine = {\n            words: [word],\n            width: wordWidth\n          };\n          result.push(newLine);\n        }\n\n        return result;\n      }, []);\n    }\n\n    return [{\n      words: children == null ? [] : children.toString().split(/(?:(?!\\u00A0+)\\s+)/)\n    }];\n  }, [isXOrYNotValid, width, scaleToFit, children, wordsWithWidth, spaceWidth]);\n  var startDy = (0, _react.useMemo)(function () {\n    var startDyStr = isXOrYNotValid ? '' : verticalAnchor === 'start' ? (0, _reduceCssCalc.default)(\"calc(\" + capHeight + \")\") : verticalAnchor === 'middle' ? (0, _reduceCssCalc.default)(\"calc(\" + (wordsByLines.length - 1) / 2 + \" * -\" + lineHeight + \" + (\" + capHeight + \" / 2))\") : (0, _reduceCssCalc.default)(\"calc(\" + (wordsByLines.length - 1) + \" * -\" + lineHeight + \")\");\n    return startDyStr;\n  }, [isXOrYNotValid, verticalAnchor, capHeight, wordsByLines.length, lineHeight]);\n  var transform = (0, _react.useMemo)(function () {\n    var transforms = [];\n\n    if (isXOrYNotValid) {\n      return '';\n    }\n\n    if (isNumber(x) && isNumber(y) && isNumber(width) && scaleToFit && wordsByLines.length > 0) {\n      var lineWidth = wordsByLines[0].width || 1;\n      var sx = width / lineWidth;\n      var sy = sx;\n      var originX = x - sx * x;\n      var originY = y - sy * y;\n      transforms.push(\"matrix(\" + sx + \", 0, 0, \" + sy + \", \" + originX + \", \" + originY + \")\");\n    }\n\n    if (angle) {\n      transforms.push(\"rotate(\" + angle + \", \" + x + \", \" + y + \")\");\n    }\n\n    return transforms.length > 0 ? transforms.join(' ') : '';\n  }, [isXOrYNotValid, x, y, width, scaleToFit, wordsByLines, angle]);\n  return {\n    wordsByLines: wordsByLines,\n    startDy: startDy,\n    transform: transform\n  };\n}"]},"metadata":{},"sourceType":"script"}