{"ast":null,"code":"import _objectSpread from\"F:/Rlab/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/Rlab/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import{userContext}from'../../../App';import LocationUser from'./LocationUser';import'./Location.css';import'../../../responsive.css';import firebase from'firebase';import'firebase/firestore';import{useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";if(!firebase.apps.length){firebase.initializeApp({apiKey:\"AIzaSyBXXL_2svIOIRYEArzq7Ai8G8xLQTTTqrU\",authDomain:\"iot-comm.firebaseapp.com\",projectId:\"iot-comm\",storageBucket:\"iot-comm.appspot.com\",messagingSenderId:\"707981957974\",appId:\"1:707981957974:web:5e3ecb242770f42e7b14f7\",measurementId:\"G-VFR4XEJGHK\"});}else{firebase.app();// if already initialized, use that one\n}var db=firebase.firestore();var Locations=function Locations(){var _useContext=useContext(userContext),_useContext2=_slicedToArray(_useContext,1),user=_useContext2[0];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),DBLocationData=_useState2[0],setDBLocationData=_useState2[1];var _useState3=useState({LocationID:'',addDevices:'',Device_id_1:'',Device_id_2:'',Device_id_3:''}),_useState4=_slicedToArray(_useState3,2),locationData=_useState4[0],setLocationData=_useState4[1];var _useState5=useState({click:false}),_useState6=_slicedToArray(_useState5,2),addDevices=_useState6[0],setAddDevices=_useState6[1];var handleClick=function handleClick(e){var newClick=_objectSpread({},addDevices);newClick.click=true;setAddDevices(newClick);e.preventDefault();};var handleSubmit=function handleSubmit(e){db.collection(\"location\").add(locationData).then(function(docRef){}).catch(function(error){console.error(\"Error adding document: \",error);});e.preventDefault();};var handleChange=function handleChange(e){var newLocationData=_objectSpread({},locationData);newLocationData[e.target.name]=e.target.value;setLocationData(newLocationData);};useEffect(function(){var userDb=db.collection(\"location\").onSnapshot(function(querySnapshot){var getDataFirebase=[];querySnapshot.forEach(function(doc){getDataFirebase.push(_objectSpread(_objectSpread({},doc.data()),{},{key:doc.id}));});setDBLocationData(getDataFirebase);});return userDb;},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[user.admin&&/*#__PURE__*/_jsx(\"div\",{className:\"row d-flex justify-content-end align-items-center mt-5\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title-name mb-3 d-flex justify-content-end\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-dark location-title-text\",htmlFor:\"locationId\",style:{marginRight:'60px'},children:\"Location ID\"}),/*#__PURE__*/_jsx(\"input\",{className:\"location-title-input\",type:\"text\",id:\"locationId\",placeholder:\"PlantaLiners\",name:\"LocationID\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"title-name mb-3 d-flex justify-content-end\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-dark location-title-text\",htmlFor:\"DeviceName\",style:{marginRight:'56px'},children:\"Add Device\"}),/*#__PURE__*/_jsx(\"input\",{className:\"location-title-input\",type:\"text\",id:\"DeviceName\",placeholder:\"Device Name\",name:\"addDevices\",onChange:handleChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end location-button-div\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mb-3 location-button\",style:{marginLeft:'61.6%'},onClick:handleClick,children:\"Add New Device\"})}),addDevices.click&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title-name mb-3 d-flex justify-content-end\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-dark location-title-text\",htmlFor:\"modelOfDevice\",style:{marginRight:'60px'},children:\"Device_id_1\"}),/*#__PURE__*/_jsx(\"input\",{className:\"location-title-input\",type:\"text\",id:\"modeOfDevice\",placeholder:\"Meter_ABC\",name:\"Device_id_1\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"title-name mb-3 d-flex justify-content-end\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-dark location-title-text\",htmlFor:\"modelOfDevice\",style:{marginRight:'60px'},children:\"Device_id_2\"}),/*#__PURE__*/_jsx(\"input\",{className:\"location-title-input\",type:\"text\",id:\"modeOfDevice\",placeholder:\"Meter_ABC\",name:\"Device_id_2\",onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"title-name mb-3 d-flex justify-content-end\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-dark location-title-text\",htmlFor:\"modelOfDevice\",style:{marginRight:'60px'},children:\"Device_id_3\"}),/*#__PURE__*/_jsx(\"input\",{className:\"location-title-input\",type:\"text\",id:\"modeOfDevice\",placeholder:\"Meter_ABC\",name:\"Device_id_3\",onChange:handleChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"title-name mb-3 d-flex justify-content-end\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-dark file-text location-title-text\",htmlFor:\"image\",children:\"Image\"}),/*#__PURE__*/_jsx(\"input\",{className:\"location-title-input\",type:\"file\",id:\"image\",placeholder:\"30.5\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end location-button-div\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary location-button\",style:{marginLeft:'65%'},type:\"submit\",children:\"Create/Save\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5 ms-5\",children:DBLocationData.map(function(data){return/*#__PURE__*/_jsx(LocationUser,{data:data});})})]});};export default Locations;","map":{"version":3,"sources":["F:/Rlab/client/src/Components/Home/Locations/Locations.js"],"names":["React","useContext","useState","userContext","LocationUser","firebase","useEffect","apps","length","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","db","firestore","Locations","user","DBLocationData","setDBLocationData","LocationID","addDevices","Device_id_1","Device_id_2","Device_id_3","locationData","setLocationData","click","setAddDevices","handleClick","e","newClick","preventDefault","handleSubmit","collection","add","then","docRef","catch","error","console","handleChange","newLocationData","target","name","value","userDb","onSnapshot","querySnapshot","getDataFirebase","forEach","doc","push","data","key","id","admin","marginRight","marginLeft","map"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport { userContext } from '../../../App';\r\nimport LocationUser from './LocationUser';\r\n\r\nimport './Location.css';\r\nimport '../../../responsive.css'\r\n\r\nimport firebase from 'firebase';\r\nimport 'firebase/firestore';\r\nimport { useEffect } from 'react';\r\n\r\n\r\nif (!firebase.apps.length) {\r\n    firebase.initializeApp({\r\n        apiKey: \"AIzaSyBXXL_2svIOIRYEArzq7Ai8G8xLQTTTqrU\",\r\n  authDomain: \"iot-comm.firebaseapp.com\",\r\n  projectId: \"iot-comm\",\r\n  storageBucket: \"iot-comm.appspot.com\",\r\n  messagingSenderId: \"707981957974\",\r\n  appId: \"1:707981957974:web:5e3ecb242770f42e7b14f7\",\r\n  measurementId: \"G-VFR4XEJGHK\"\r\n    });\r\n }else {\r\n    firebase.app(); // if already initialized, use that one\r\n }\r\n\r\nconst db = firebase.firestore();\r\n\r\n\r\n\r\nconst Locations = () => {\r\n    const [user] = useContext(userContext);\r\n    const [DBLocationData, setDBLocationData] = useState([])\r\n    const [locationData, setLocationData] = useState({\r\n        LocationID:'',\r\n        addDevices:'',\r\n        Device_id_1:'',\r\n        Device_id_2:'',\r\n        Device_id_3:'',\r\n    });\r\n    const [addDevices, setAddDevices] = useState({\r\n        click: false,\r\n    });\r\n\r\n    const handleClick = (e) => {\r\n        const newClick = {...addDevices};\r\n        newClick.click = true;\r\n        setAddDevices(newClick);\r\n        e.preventDefault()\r\n    }\r\n    const handleSubmit = (e) => {\r\n        db.collection(\"location\").add(locationData)\r\n        .then((docRef) => {\r\n            \r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Error adding document: \", error);\r\n        });\r\n        e.preventDefault();\r\n    };\r\n    const handleChange =(e) => {\r\n        const newLocationData = {...locationData};\r\n        newLocationData[e.target.name] = e.target.value;\r\n        setLocationData(newLocationData)\r\n    }; \r\n    useEffect(() => {\r\n        const userDb =  db.collection(\"location\").onSnapshot((querySnapshot) => {\r\n            const getDataFirebase = [];\r\n            querySnapshot.forEach((doc) => {\r\n              getDataFirebase.push({...doc.data(), key:doc.id});\r\n            });\r\n            setDBLocationData(getDataFirebase)\r\n        });\r\n        return userDb\r\n    },[])\r\n    \r\n    return (\r\n        <div className=\"container\">\r\n           {user.admin && <div className=\"row d-flex justify-content-end align-items-center mt-5\">\r\n           <form action=\"\" onSubmit={handleSubmit}>\r\n                <div className=\"title-name mb-3 d-flex justify-content-end\">\r\n                    <label className=\"text-dark location-title-text\" htmlFor=\"locationId\" style={{marginRight:'60px'}} >Location ID</label>\r\n                    <input className=\"location-title-input\" type=\"text\" id='locationId' placeholder='PlantaLiners' name=\"LocationID\" onChange={handleChange}/>\r\n                </div>\r\n                <div className=\"title-name mb-3 d-flex justify-content-end\">\r\n                    <label className=\"text-dark location-title-text\" htmlFor=\"DeviceName\" style={{marginRight:'56px'}}>Add Device</label>\r\n                    <input className=\"location-title-input\" type=\"text\" id='DeviceName' placeholder='Device Name' name=\"addDevices\" onChange={handleChange}/>\r\n                </div>\r\n                <div className=\"d-flex justify-content-end location-button-div\">\r\n                    <button className=\"btn btn-primary mb-3 location-button\" style={{marginLeft:'61.6%'}} onClick={handleClick}>Add New Device</button>\r\n                </div>\r\n                \r\n                 \r\n                {addDevices.click && <div>\r\n                <div className=\"title-name mb-3 d-flex justify-content-end\">\r\n                    <label className=\"text-dark location-title-text\" htmlFor=\"modelOfDevice\" style={{marginRight:'60px'}}>Device_id_1</label>\r\n                    <input className=\"location-title-input\" type=\"text\" id='modeOfDevice' placeholder='Meter_ABC' name=\"Device_id_1\" onChange={handleChange}/>\r\n                </div>\r\n                <div className=\"title-name mb-3 d-flex justify-content-end\">\r\n                    <label className=\"text-dark location-title-text\" htmlFor=\"modelOfDevice\" style={{marginRight:'60px'}}>Device_id_2</label>\r\n                    <input className=\"location-title-input\" type=\"text\" id='modeOfDevice' placeholder='Meter_ABC' name=\"Device_id_2\" onChange={handleChange}/>\r\n                </div>\r\n                <div className=\"title-name mb-3 d-flex justify-content-end\">\r\n                    <label className=\"text-dark location-title-text\" htmlFor=\"modelOfDevice\" style={{marginRight:'60px'}}>Device_id_3</label>\r\n                    <input className=\"location-title-input\" type=\"text\" id='modeOfDevice' placeholder='Meter_ABC' name=\"Device_id_3\" onChange={handleChange}/>\r\n                </div>\r\n                </div>}\r\n            \r\n                <div className=\"title-name mb-3 d-flex justify-content-end\">\r\n                    <label className=\"text-dark file-text location-title-text\" htmlFor=\"image\">Image</label>\r\n                    <input className=\"location-title-input\" type=\"file\" id='image' placeholder='30.5'/>\r\n                </div>\r\n                <div className=\"d-flex justify-content-end location-button-div\">\r\n                    <button className=\"btn btn-primary location-button\" style={{marginLeft:'65%'}} type=\"submit\">Create/Save</button>\r\n                </div>\r\n                \r\n            </form>\r\n           </div>}\r\n            <div className=\"row mt-5 ms-5\">\r\n            { DBLocationData.map(data => {return <LocationUser data={data}/>})}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Locations;"]},"metadata":{},"sourceType":"module"}