{"ast":null,"code":"import _objectSpread from\"F:/Rlab/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/Rlab/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'./user.css';import firebase from'firebase';import'firebase/firestore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";if(!firebase.apps.length){firebase.initializeApp({apiKey:\"AIzaSyBXXL_2svIOIRYEArzq7Ai8G8xLQTTTqrU\",authDomain:\"iot-comm.firebaseapp.com\",projectId:\"iot-comm\",storageBucket:\"iot-comm.appspot.com\",messagingSenderId:\"707981957974\",appId:\"1:707981957974:web:5e3ecb242770f42e7b14f7\",measurementId:\"G-VFR4XEJGHK\"});}else{firebase.app();// if already initialized, use that one\n}var db=firebase.firestore();var UserForm=function UserForm(){var _useState=useState({email:'',name:'',position:'',Role:'admin',Uid:''}),_useState2=_slicedToArray(_useState,2),userInfo=_useState2[0],setuserInfo=_useState2[1];var _useState3=useState({notError:true}),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),userUpdate=_useState6[0],setUserUpdate=_useState6[1];var handleOnchange=function handleOnchange(event){var newUserInfo=_objectSpread({},userInfo);newUserInfo[event.target.name]=event.target.value;var RandomId=Math.random()*100000000000000000000000000000000000000;newUserInfo.Uid=RandomId;setuserInfo(newUserInfo);};var handleOnChangeSelect=function handleOnChangeSelect(event){setuserInfo({Role:event.target.value});};var handleSubmit=function handleSubmit(e){db.collection(\"user\").add(userInfo).then(function(docRef){}).catch(function(error){});e.preventDefault();};function arrayFunc(arr,key){var resultArray=[];for(var i=0;i<arr.length;i++){if(arr[i].email===key){resultArray=arr[i];}}return resultArray;};useEffect(function(){var userDb=db.collection(\"user\").onSnapshot(function(querySnapshot){var getDataFirebase=[];querySnapshot.forEach(function(doc){getDataFirebase.push(_objectSpread(_objectSpread({},doc.data()),{},{key:doc.id}));});if(getDataFirebase.length>0){var functionalArray=arrayFunc(getDataFirebase,userInfo.email);setUserUpdate(functionalArray);}});return userDb;},[userInfo]);useEffect(function(){if(userUpdate.email===userInfo.email){var newError=_objectSpread({},error);newError.notError=false;setError(newError);}else if(userUpdate.email!==userInfo.email){var _newError=_objectSpread({},error);_newError.notError=true;setError(_newError);}},[userInfo,userUpdate,error]);return/*#__PURE__*/_jsx(\"div\",{style:{width:'50%',margin:'2% auto'},className:\"text-center\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justiy-content-around mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Role\",className:\"me-5  text-dark interface-name\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Role\"})}),/*#__PURE__*/_jsxs(\"select\",{id:\"role\",className:\"form-control\",onChange:handleOnChangeSelect,children:[/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"oparetors\",children:\"Oparetors\"}),/*#__PURE__*/_jsx(\"option\",{value:\"viewers\",children:\"Viewers\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justiy-content-around mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"userEmail\",className:\"me-5 text-dark interface-name\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Email\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"userEmail\",className:\"form-control\",placeholder:\"Enter Your Email\",name:\"email\",onChange:handleOnchange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justiy-content-around mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"me-5 text-dark interface-name\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Name\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",placeholder:\"Enter Your Name\",className:\"form-control\",name:\"name\",onChange:handleOnchange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justiy-content-around mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"position\",className:\"me-5 text-dark interface-name\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Position\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"position\",placeholder:\"Enter Your position\",className:\"form-control\",name:\"position\",onChange:handleOnchange})]}),error.notError&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary create-button\",type:\"submit\",children:\"Create/Save\"}),error.notError===false&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:\"This email user Already created. please try with another email.\"})]})});};export default UserForm;","map":{"version":3,"sources":["F:/Rlab/client/src/Components/Home/User/UserForm.js"],"names":["React","useEffect","useState","firebase","apps","length","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","db","firestore","UserForm","email","name","position","Role","Uid","userInfo","setuserInfo","notError","error","setError","userUpdate","setUserUpdate","handleOnchange","event","newUserInfo","target","value","RandomId","Math","random","handleOnChangeSelect","handleSubmit","e","collection","add","then","docRef","catch","preventDefault","arrayFunc","arr","key","resultArray","i","userDb","onSnapshot","querySnapshot","getDataFirebase","forEach","doc","push","data","id","functionalArray","newError","width","margin"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './user.css'\r\n\r\nimport firebase from 'firebase';\r\nimport 'firebase/firestore';\r\n\r\n\r\nif (!firebase.apps.length) {\r\n    firebase.initializeApp({\r\n        apiKey: \"AIzaSyBXXL_2svIOIRYEArzq7Ai8G8xLQTTTqrU\",\r\n  authDomain: \"iot-comm.firebaseapp.com\",\r\n  projectId: \"iot-comm\",\r\n  storageBucket: \"iot-comm.appspot.com\",\r\n  messagingSenderId: \"707981957974\",\r\n  appId: \"1:707981957974:web:5e3ecb242770f42e7b14f7\",\r\n  measurementId: \"G-VFR4XEJGHK\"\r\n    });\r\n }else {\r\n    firebase.app(); // if already initialized, use that one\r\n }\r\n\r\nconst db = firebase.firestore();\r\n\r\nconst UserForm = () => {\r\n    const [userInfo, setuserInfo] = useState({\r\n        email:'',\r\n        name:'',\r\n        position:'',\r\n        Role:'admin',\r\n        Uid:'',\r\n    });\r\n    const [error, setError] = useState({\r\n        notError: true\r\n    })\r\n    const [userUpdate, setUserUpdate] = useState([])\r\n    const handleOnchange = (event) => {\r\n        const newUserInfo = {...userInfo};\r\n        newUserInfo[event.target.name] = event.target.value;\r\n        const RandomId = Math.random() * 100000000000000000000000000000000000000;\r\n        newUserInfo.Uid = RandomId;\r\n        setuserInfo(newUserInfo)\r\n    }\r\n    const handleOnChangeSelect = (event) => {\r\n        setuserInfo({Role: event.target.value})\r\n    };\r\n    const handleSubmit = (e) => {\r\n        db.collection(\"user\").add(userInfo)\r\n        .then((docRef) => {\r\n           \r\n        })\r\n        .catch((error) => {\r\n            \r\n        });\r\n        e.preventDefault();\r\n    }\r\n    \r\n    function arrayFunc(arr,key) {\r\n        let resultArray = [];\r\n        for(let i = 0; i < arr.length; i++){\r\n            if(arr[i].email === key){\r\n                resultArray = arr[i];\r\n            }\r\n            \r\n        }\r\n       \r\n        return resultArray\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        const userDb =  db.collection(\"user\").onSnapshot((querySnapshot) => {\r\n            const getDataFirebase = [];\r\n            querySnapshot.forEach((doc) => {\r\n              getDataFirebase.push({...doc.data(), key:doc.id});\r\n            });\r\n            \r\n            if(getDataFirebase.length > 0){\r\n                const functionalArray = arrayFunc(getDataFirebase, userInfo.email);\r\n                setUserUpdate(functionalArray);\r\n                \r\n                \r\n               \r\n            }\r\n        });\r\n        return userDb;\r\n    },[userInfo]);\r\n    useEffect(() => {\r\n        if(userUpdate.email === userInfo.email){\r\n            const newError = {...error}\r\n            newError.notError = false;\r\n            setError(newError)\r\n        }\r\n        else if(userUpdate.email !== userInfo.email){\r\n            const newError = {...error}\r\n            newError.notError = true;\r\n            setError(newError)\r\n        }\r\n    }, [userInfo, userUpdate,error])\r\n    \r\n    return (\r\n        <div style={{width:'50%', margin:'2% auto'}} className='text-center'>\r\n            <form action=\"\" onSubmit={handleSubmit}>\r\n            <div className='d-flex justiy-content-around mb-4' >\r\n                    <label htmlFor=\"Role\"  className='me-5  text-dark interface-name'><h5>Role</h5></label>\r\n                    <select id=\"role\" className='form-control' onChange={handleOnChangeSelect}>\r\n                        <option value=\"admin\" >Admin</option>\r\n                        <option value=\"oparetors\">Oparetors</option>\r\n                        <option value=\"viewers\">Viewers</option>\r\n                    </select>\r\n                </div>\r\n                <div className='d-flex justiy-content-around mb-4'>\r\n                    <label htmlFor=\"userEmail\"  className='me-5 text-dark interface-name'><h5>Email</h5></label>\r\n                    <input type=\"email\" id='userEmail' className='form-control' placeholder='Enter Your Email' name=\"email\" onChange={handleOnchange}/>\r\n                </div>\r\n                <div className='d-flex justiy-content-around mb-4'>\r\n                    <label htmlFor=\"name\" className='me-5 text-dark interface-name'><h5>Name</h5></label>\r\n                    <input type=\"text\" id='name' placeholder='Enter Your Name' className='form-control' name=\"name\" onChange={handleOnchange}/>\r\n                </div>\r\n                <div className='d-flex justiy-content-around mb-4'>\r\n                    <label htmlFor=\"position\"  className='me-5 text-dark interface-name'><h5>Position</h5></label>\r\n                    <input type=\"text\" id='position' placeholder='Enter Your position' className='form-control' name=\"position\" onChange={handleOnchange}/>\r\n                </div>\r\n                {error.notError && <button className=\"btn btn-primary create-button\" type=\"submit\">Create/Save</button>}\r\n                {error.notError===false && <p className=\"text-danger\">This email user Already created. please try with another email.</p>}\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserForm;"]},"metadata":{},"sourceType":"module"}