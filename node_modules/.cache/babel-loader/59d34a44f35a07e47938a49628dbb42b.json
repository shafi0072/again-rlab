{"ast":null,"code":"import _pt from \"prop-types\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n/* eslint-disable react/jsx-handler-names */\n\n\nimport React, { useCallback, useRef } from 'react';\nimport useDrag from '@visx/drag/lib/useDrag';\nimport Annotation from './Annotation';\nvar defaultDragHandleProps = {\n  r: 10,\n  fill: 'transparent',\n  stroke: '#777',\n  strokeDasharray: '4,2',\n  strokeWidth: 2\n};\nexport default function EditableAnnotation(_ref) {\n  var _ref$canEditLabel = _ref.canEditLabel,\n      canEditLabel = _ref$canEditLabel === void 0 ? true : _ref$canEditLabel,\n      _ref$canEditSubject = _ref.canEditSubject,\n      canEditSubject = _ref$canEditSubject === void 0 ? true : _ref$canEditSubject,\n      children = _ref.children,\n      _ref$dx = _ref.dx,\n      labelDx = _ref$dx === void 0 ? 0 : _ref$dx,\n      _ref$dy = _ref.dy,\n      labelDy = _ref$dy === void 0 ? 0 : _ref$dy,\n      height = _ref.height,\n      labelDragHandleProps = _ref.labelDragHandleProps,\n      onDragEnd = _ref.onDragEnd,\n      onDragMove = _ref.onDragMove,\n      onDragStart = _ref.onDragStart,\n      subjectDragHandleProps = _ref.subjectDragHandleProps,\n      width = _ref.width,\n      _ref$x = _ref.x,\n      subjectX = _ref$x === void 0 ? 0 : _ref$x,\n      _ref$y = _ref.y,\n      subjectY = _ref$y === void 0 ? 0 : _ref$y; // chicken before the egg, we need these to reference drag state\n  // in drag callbacks which are defined before useDrag() state is available\n\n  var subjectDragRef = useRef();\n  var labelDragRef = useRef();\n  var handleDragStart = useCallback(function (_ref2) {\n    var event = _ref2.event;\n\n    if (onDragStart) {\n      var _subjectDragRef$curre, _subjectDragRef$curre2, _subjectDragRef$curre3, _subjectDragRef$curre4, _labelDragRef$current, _labelDragRef$current2, _labelDragRef$current3, _labelDragRef$current4;\n\n      onDragStart({\n        event: event,\n        x: subjectX + ((_subjectDragRef$curre = (_subjectDragRef$curre2 = subjectDragRef.current) == null ? void 0 : _subjectDragRef$curre2.dx) != null ? _subjectDragRef$curre : 0),\n        y: subjectY + ((_subjectDragRef$curre3 = (_subjectDragRef$curre4 = subjectDragRef.current) == null ? void 0 : _subjectDragRef$curre4.dy) != null ? _subjectDragRef$curre3 : 0),\n        dx: labelDx + ((_labelDragRef$current = (_labelDragRef$current2 = labelDragRef.current) == null ? void 0 : _labelDragRef$current2.dx) != null ? _labelDragRef$current : 0),\n        dy: labelDy + ((_labelDragRef$current3 = (_labelDragRef$current4 = labelDragRef.current) == null ? void 0 : _labelDragRef$current4.dy) != null ? _labelDragRef$current3 : 0)\n      });\n    }\n  }, [labelDx, labelDy, onDragStart, subjectX, subjectY]);\n  var handleDragMove = useCallback(function (_ref3) {\n    var event = _ref3.event;\n\n    if (onDragMove) {\n      var _subjectDragRef$curre5, _subjectDragRef$curre6, _subjectDragRef$curre7, _subjectDragRef$curre8, _labelDragRef$current5, _labelDragRef$current6, _labelDragRef$current7, _labelDragRef$current8;\n\n      onDragMove({\n        event: event,\n        x: subjectX + ((_subjectDragRef$curre5 = (_subjectDragRef$curre6 = subjectDragRef.current) == null ? void 0 : _subjectDragRef$curre6.dx) != null ? _subjectDragRef$curre5 : 0),\n        y: subjectY + ((_subjectDragRef$curre7 = (_subjectDragRef$curre8 = subjectDragRef.current) == null ? void 0 : _subjectDragRef$curre8.dy) != null ? _subjectDragRef$curre7 : 0),\n        dx: labelDx + ((_labelDragRef$current5 = (_labelDragRef$current6 = labelDragRef.current) == null ? void 0 : _labelDragRef$current6.dx) != null ? _labelDragRef$current5 : 0),\n        dy: labelDy + ((_labelDragRef$current7 = (_labelDragRef$current8 = labelDragRef.current) == null ? void 0 : _labelDragRef$current8.dy) != null ? _labelDragRef$current7 : 0)\n      });\n    }\n  }, [labelDx, labelDy, onDragMove, subjectX, subjectY]);\n  var handleDragEnd = useCallback(function (_ref4) {\n    var event = _ref4.event;\n\n    if (onDragEnd) {\n      var _subjectDragRef$curre9, _subjectDragRef$curre10, _subjectDragRef$curre11, _subjectDragRef$curre12, _labelDragRef$current9, _labelDragRef$current10, _labelDragRef$current11, _labelDragRef$current12;\n\n      onDragEnd({\n        event: event,\n        x: subjectX + ((_subjectDragRef$curre9 = (_subjectDragRef$curre10 = subjectDragRef.current) == null ? void 0 : _subjectDragRef$curre10.dx) != null ? _subjectDragRef$curre9 : 0),\n        y: subjectY + ((_subjectDragRef$curre11 = (_subjectDragRef$curre12 = subjectDragRef.current) == null ? void 0 : _subjectDragRef$curre12.dy) != null ? _subjectDragRef$curre11 : 0),\n        dx: labelDx + ((_labelDragRef$current9 = (_labelDragRef$current10 = labelDragRef.current) == null ? void 0 : _labelDragRef$current10.dx) != null ? _labelDragRef$current9 : 0),\n        dy: labelDy + ((_labelDragRef$current11 = (_labelDragRef$current12 = labelDragRef.current) == null ? void 0 : _labelDragRef$current12.dy) != null ? _labelDragRef$current11 : 0)\n      });\n    }\n  }, [labelDx, labelDy, onDragEnd, subjectX, subjectY]);\n  var subjectDrag = useDrag({\n    onDragStart: handleDragStart,\n    onDragMove: handleDragMove,\n    onDragEnd: handleDragEnd,\n    x: subjectX,\n    y: subjectY\n  });\n  var labelDrag = useDrag({\n    onDragStart: handleDragStart,\n    onDragMove: handleDragMove,\n    onDragEnd: handleDragEnd,\n    x: labelDx,\n    y: labelDy\n  }); // enable referencing these in the callbacks defined before useDrag is called\n\n  subjectDragRef.current = subjectDrag;\n  labelDragRef.current = labelDrag;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Annotation, {\n    x: subjectX + subjectDrag.dx,\n    y: subjectY + subjectDrag.dy,\n    dx: labelDx + labelDrag.dx,\n    dy: labelDy + labelDrag.dy\n  }, children), subjectDrag.isDragging && /*#__PURE__*/React.createElement(\"rect\", {\n    width: width,\n    height: height,\n    onMouseMove: subjectDrag.dragMove,\n    onMouseUp: subjectDrag.dragEnd,\n    fill: \"transparent\"\n  }), canEditSubject && /*#__PURE__*/React.createElement(\"circle\", _extends({\n    cx: subjectX,\n    cy: subjectY,\n    transform: \"translate(\" + subjectDrag.dx + \",\" + subjectDrag.dy + \")\",\n    onMouseMove: subjectDrag.dragMove,\n    onMouseUp: subjectDrag.dragEnd,\n    onMouseDown: subjectDrag.dragStart,\n    onTouchStart: subjectDrag.dragStart,\n    onTouchMove: subjectDrag.dragMove,\n    onTouchEnd: subjectDrag.dragEnd,\n    cursor: subjectDrag.isDragging ? 'grabbing' : 'grab'\n  }, defaultDragHandleProps, subjectDragHandleProps)), labelDrag.isDragging && /*#__PURE__*/React.createElement(\"rect\", {\n    width: width,\n    height: height,\n    onMouseMove: labelDrag.dragMove,\n    onMouseUp: labelDrag.dragEnd,\n    fill: \"transparent\"\n  }), canEditLabel && /*#__PURE__*/React.createElement(\"circle\", _extends({\n    cx: subjectX + subjectDrag.dx + labelDx,\n    cy: subjectY + subjectDrag.dy + labelDy,\n    transform: \"translate(\" + labelDrag.dx + \",\" + labelDrag.dy + \")\",\n    onMouseMove: labelDrag.dragMove,\n    onMouseUp: labelDrag.dragEnd,\n    onMouseDown: labelDrag.dragStart,\n    onTouchStart: labelDrag.dragStart,\n    onTouchMove: labelDrag.dragMove,\n    onTouchEnd: labelDrag.dragEnd,\n    cursor: labelDrag.isDragging ? 'grabbing' : 'grab'\n  }, defaultDragHandleProps, labelDragHandleProps)));\n}\nEditableAnnotation.propTypes = {\n  width: _pt.number.isRequired,\n  height: _pt.number.isRequired,\n  children: _pt.node.isRequired,\n  canEditLabel: _pt.bool,\n  canEditSubject: _pt.bool,\n  onDragStart: _pt.func,\n  onDragMove: _pt.func,\n  onDragEnd: _pt.func\n};","map":{"version":3,"sources":["C:/remotePackRlab-acab49ee44aa8f06acbfc147116dbc3387885161/node_modules/@visx/annotation/esm/components/EditableAnnotation.js"],"names":["_pt","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","React","useCallback","useRef","useDrag","Annotation","defaultDragHandleProps","r","fill","stroke","strokeDasharray","strokeWidth","EditableAnnotation","_ref","_ref$canEditLabel","canEditLabel","_ref$canEditSubject","canEditSubject","children","_ref$dx","dx","labelDx","_ref$dy","dy","labelDy","height","labelDragHandleProps","onDragEnd","onDragMove","onDragStart","subjectDragHandleProps","width","_ref$x","x","subjectX","_ref$y","y","subjectY","subjectDragRef","labelDragRef","handleDragStart","_ref2","event","_subjectDragRef$curre","_subjectDragRef$curre2","_subjectDragRef$curre3","_subjectDragRef$curre4","_labelDragRef$current","_labelDragRef$current2","_labelDragRef$current3","_labelDragRef$current4","current","handleDragMove","_ref3","_subjectDragRef$curre5","_subjectDragRef$curre6","_subjectDragRef$curre7","_subjectDragRef$curre8","_labelDragRef$current5","_labelDragRef$current6","_labelDragRef$current7","_labelDragRef$current8","handleDragEnd","_ref4","_subjectDragRef$curre9","_subjectDragRef$curre10","_subjectDragRef$curre11","_subjectDragRef$curre12","_labelDragRef$current9","_labelDragRef$current10","_labelDragRef$current11","_labelDragRef$current12","subjectDrag","labelDrag","createElement","Fragment","isDragging","onMouseMove","dragMove","onMouseUp","dragEnd","cx","cy","transform","onMouseDown","dragStart","onTouchStart","onTouchMove","onTouchEnd","cursor","propTypes","number","isRequired","node","bool","func"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,YAAhB;;AAEA,SAASC,QAAT,GAAoB;AAAEA,EAAAA,QAAQ,GAAGC,MAAM,CAACC,MAAP,IAAiB,UAAUC,MAAV,EAAkB;AAAE,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AAAE,UAAIG,MAAM,GAAGF,SAAS,CAACD,CAAD,CAAtB;;AAA2B,WAAK,IAAII,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,YAAIN,MAAM,CAACQ,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,GAA7C,CAAJ,EAAuD;AAAEL,UAAAA,MAAM,CAACK,GAAD,CAAN,GAAcD,MAAM,CAACC,GAAD,CAApB;AAA4B;AAAE;AAAE;;AAAC,WAAOL,MAAP;AAAgB,GAA5P;;AAA8P,SAAOH,QAAQ,CAACY,KAAT,CAAe,IAAf,EAAqBP,SAArB,CAAP;AAAyC;AAE7T;;;AACA,OAAOQ,KAAP,IAAgBC,WAAhB,EAA6BC,MAA7B,QAA2C,OAA3C;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,IAAIC,sBAAsB,GAAG;AAC3BC,EAAAA,CAAC,EAAE,EADwB;AAE3BC,EAAAA,IAAI,EAAE,aAFqB;AAG3BC,EAAAA,MAAM,EAAE,MAHmB;AAI3BC,EAAAA,eAAe,EAAE,KAJU;AAK3BC,EAAAA,WAAW,EAAE;AALc,CAA7B;AAOA,eAAe,SAASC,kBAAT,CAA4BC,IAA5B,EAAkC;AAC/C,MAAIC,iBAAiB,GAAGD,IAAI,CAACE,YAA7B;AAAA,MACIA,YAAY,GAAGD,iBAAiB,KAAK,KAAK,CAA3B,GAA+B,IAA/B,GAAsCA,iBADzD;AAAA,MAEIE,mBAAmB,GAAGH,IAAI,CAACI,cAF/B;AAAA,MAGIA,cAAc,GAAGD,mBAAmB,KAAK,KAAK,CAA7B,GAAiC,IAAjC,GAAwCA,mBAH7D;AAAA,MAIIE,QAAQ,GAAGL,IAAI,CAACK,QAJpB;AAAA,MAKIC,OAAO,GAAGN,IAAI,CAACO,EALnB;AAAA,MAMIC,OAAO,GAAGF,OAAO,KAAK,KAAK,CAAjB,GAAqB,CAArB,GAAyBA,OANvC;AAAA,MAOIG,OAAO,GAAGT,IAAI,CAACU,EAPnB;AAAA,MAQIC,OAAO,GAAGF,OAAO,KAAK,KAAK,CAAjB,GAAqB,CAArB,GAAyBA,OARvC;AAAA,MASIG,MAAM,GAAGZ,IAAI,CAACY,MATlB;AAAA,MAUIC,oBAAoB,GAAGb,IAAI,CAACa,oBAVhC;AAAA,MAWIC,SAAS,GAAGd,IAAI,CAACc,SAXrB;AAAA,MAYIC,UAAU,GAAGf,IAAI,CAACe,UAZtB;AAAA,MAaIC,WAAW,GAAGhB,IAAI,CAACgB,WAbvB;AAAA,MAcIC,sBAAsB,GAAGjB,IAAI,CAACiB,sBAdlC;AAAA,MAeIC,KAAK,GAAGlB,IAAI,CAACkB,KAfjB;AAAA,MAgBIC,MAAM,GAAGnB,IAAI,CAACoB,CAhBlB;AAAA,MAiBIC,QAAQ,GAAGF,MAAM,KAAK,KAAK,CAAhB,GAAoB,CAApB,GAAwBA,MAjBvC;AAAA,MAkBIG,MAAM,GAAGtB,IAAI,CAACuB,CAlBlB;AAAA,MAmBIC,QAAQ,GAAGF,MAAM,KAAK,KAAK,CAAhB,GAAoB,CAApB,GAAwBA,MAnBvC,CAD+C,CAqB/C;AACA;;AACA,MAAIG,cAAc,GAAGnC,MAAM,EAA3B;AACA,MAAIoC,YAAY,GAAGpC,MAAM,EAAzB;AACA,MAAIqC,eAAe,GAAGtC,WAAW,CAAC,UAAUuC,KAAV,EAAiB;AACjD,QAAIC,KAAK,GAAGD,KAAK,CAACC,KAAlB;;AAEA,QAAIb,WAAJ,EAAiB;AACf,UAAIc,qBAAJ,EAA2BC,sBAA3B,EAAmDC,sBAAnD,EAA2EC,sBAA3E,EAAmGC,qBAAnG,EAA0HC,sBAA1H,EAAkJC,sBAAlJ,EAA0KC,sBAA1K;;AAEArB,MAAAA,WAAW,CAAC;AACVa,QAAAA,KAAK,EAAEA,KADG;AAEVT,QAAAA,CAAC,EAAEC,QAAQ,IAAI,CAACS,qBAAqB,GAAG,CAACC,sBAAsB,GAAGN,cAAc,CAACa,OAAzC,KAAqD,IAArD,GAA4D,KAAK,CAAjE,GAAqEP,sBAAsB,CAACxB,EAArH,KAA4H,IAA5H,GAAmIuB,qBAAnI,GAA2J,CAA/J,CAFD;AAGVP,QAAAA,CAAC,EAAEC,QAAQ,IAAI,CAACQ,sBAAsB,GAAG,CAACC,sBAAsB,GAAGR,cAAc,CAACa,OAAzC,KAAqD,IAArD,GAA4D,KAAK,CAAjE,GAAqEL,sBAAsB,CAACvB,EAAtH,KAA6H,IAA7H,GAAoIsB,sBAApI,GAA6J,CAAjK,CAHD;AAIVzB,QAAAA,EAAE,EAAEC,OAAO,IAAI,CAAC0B,qBAAqB,GAAG,CAACC,sBAAsB,GAAGT,YAAY,CAACY,OAAvC,KAAmD,IAAnD,GAA0D,KAAK,CAA/D,GAAmEH,sBAAsB,CAAC5B,EAAnH,KAA0H,IAA1H,GAAiI2B,qBAAjI,GAAyJ,CAA7J,CAJD;AAKVxB,QAAAA,EAAE,EAAEC,OAAO,IAAI,CAACyB,sBAAsB,GAAG,CAACC,sBAAsB,GAAGX,YAAY,CAACY,OAAvC,KAAmD,IAAnD,GAA0D,KAAK,CAA/D,GAAmED,sBAAsB,CAAC3B,EAApH,KAA2H,IAA3H,GAAkI0B,sBAAlI,GAA2J,CAA/J;AALD,OAAD,CAAX;AAOD;AACF,GAdgC,EAc9B,CAAC5B,OAAD,EAAUG,OAAV,EAAmBK,WAAnB,EAAgCK,QAAhC,EAA0CG,QAA1C,CAd8B,CAAjC;AAeA,MAAIe,cAAc,GAAGlD,WAAW,CAAC,UAAUmD,KAAV,EAAiB;AAChD,QAAIX,KAAK,GAAGW,KAAK,CAACX,KAAlB;;AAEA,QAAId,UAAJ,EAAgB;AACd,UAAI0B,sBAAJ,EAA4BC,sBAA5B,EAAoDC,sBAApD,EAA4EC,sBAA5E,EAAoGC,sBAApG,EAA4HC,sBAA5H,EAAoJC,sBAApJ,EAA4KC,sBAA5K;;AAEAjC,MAAAA,UAAU,CAAC;AACTc,QAAAA,KAAK,EAAEA,KADE;AAETT,QAAAA,CAAC,EAAEC,QAAQ,IAAI,CAACoB,sBAAsB,GAAG,CAACC,sBAAsB,GAAGjB,cAAc,CAACa,OAAzC,KAAqD,IAArD,GAA4D,KAAK,CAAjE,GAAqEI,sBAAsB,CAACnC,EAAtH,KAA6H,IAA7H,GAAoIkC,sBAApI,GAA6J,CAAjK,CAFF;AAGTlB,QAAAA,CAAC,EAAEC,QAAQ,IAAI,CAACmB,sBAAsB,GAAG,CAACC,sBAAsB,GAAGnB,cAAc,CAACa,OAAzC,KAAqD,IAArD,GAA4D,KAAK,CAAjE,GAAqEM,sBAAsB,CAAClC,EAAtH,KAA6H,IAA7H,GAAoIiC,sBAApI,GAA6J,CAAjK,CAHF;AAITpC,QAAAA,EAAE,EAAEC,OAAO,IAAI,CAACqC,sBAAsB,GAAG,CAACC,sBAAsB,GAAGpB,YAAY,CAACY,OAAvC,KAAmD,IAAnD,GAA0D,KAAK,CAA/D,GAAmEQ,sBAAsB,CAACvC,EAApH,KAA2H,IAA3H,GAAkIsC,sBAAlI,GAA2J,CAA/J,CAJF;AAKTnC,QAAAA,EAAE,EAAEC,OAAO,IAAI,CAACoC,sBAAsB,GAAG,CAACC,sBAAsB,GAAGtB,YAAY,CAACY,OAAvC,KAAmD,IAAnD,GAA0D,KAAK,CAA/D,GAAmEU,sBAAsB,CAACtC,EAApH,KAA2H,IAA3H,GAAkIqC,sBAAlI,GAA2J,CAA/J;AALF,OAAD,CAAV;AAOD;AACF,GAd+B,EAc7B,CAACvC,OAAD,EAAUG,OAAV,EAAmBI,UAAnB,EAA+BM,QAA/B,EAAyCG,QAAzC,CAd6B,CAAhC;AAeA,MAAIyB,aAAa,GAAG5D,WAAW,CAAC,UAAU6D,KAAV,EAAiB;AAC/C,QAAIrB,KAAK,GAAGqB,KAAK,CAACrB,KAAlB;;AAEA,QAAIf,SAAJ,EAAe;AACb,UAAIqC,sBAAJ,EAA4BC,uBAA5B,EAAqDC,uBAArD,EAA8EC,uBAA9E,EAAuGC,sBAAvG,EAA+HC,uBAA/H,EAAwJC,uBAAxJ,EAAiLC,uBAAjL;;AAEA5C,MAAAA,SAAS,CAAC;AACRe,QAAAA,KAAK,EAAEA,KADC;AAERT,QAAAA,CAAC,EAAEC,QAAQ,IAAI,CAAC8B,sBAAsB,GAAG,CAACC,uBAAuB,GAAG3B,cAAc,CAACa,OAA1C,KAAsD,IAAtD,GAA6D,KAAK,CAAlE,GAAsEc,uBAAuB,CAAC7C,EAAxH,KAA+H,IAA/H,GAAsI4C,sBAAtI,GAA+J,CAAnK,CAFH;AAGR5B,QAAAA,CAAC,EAAEC,QAAQ,IAAI,CAAC6B,uBAAuB,GAAG,CAACC,uBAAuB,GAAG7B,cAAc,CAACa,OAA1C,KAAsD,IAAtD,GAA6D,KAAK,CAAlE,GAAsEgB,uBAAuB,CAAC5C,EAAzH,KAAgI,IAAhI,GAAuI2C,uBAAvI,GAAiK,CAArK,CAHH;AAIR9C,QAAAA,EAAE,EAAEC,OAAO,IAAI,CAAC+C,sBAAsB,GAAG,CAACC,uBAAuB,GAAG9B,YAAY,CAACY,OAAxC,KAAoD,IAApD,GAA2D,KAAK,CAAhE,GAAoEkB,uBAAuB,CAACjD,EAAtH,KAA6H,IAA7H,GAAoIgD,sBAApI,GAA6J,CAAjK,CAJH;AAKR7C,QAAAA,EAAE,EAAEC,OAAO,IAAI,CAAC8C,uBAAuB,GAAG,CAACC,uBAAuB,GAAGhC,YAAY,CAACY,OAAxC,KAAoD,IAApD,GAA2D,KAAK,CAAhE,GAAoEoB,uBAAuB,CAAChD,EAAvH,KAA8H,IAA9H,GAAqI+C,uBAArI,GAA+J,CAAnK;AALH,OAAD,CAAT;AAOD;AACF,GAd8B,EAc5B,CAACjD,OAAD,EAAUG,OAAV,EAAmBG,SAAnB,EAA8BO,QAA9B,EAAwCG,QAAxC,CAd4B,CAA/B;AAeA,MAAImC,WAAW,GAAGpE,OAAO,CAAC;AACxByB,IAAAA,WAAW,EAAEW,eADW;AAExBZ,IAAAA,UAAU,EAAEwB,cAFY;AAGxBzB,IAAAA,SAAS,EAAEmC,aAHa;AAIxB7B,IAAAA,CAAC,EAAEC,QAJqB;AAKxBE,IAAAA,CAAC,EAAEC;AALqB,GAAD,CAAzB;AAOA,MAAIoC,SAAS,GAAGrE,OAAO,CAAC;AACtByB,IAAAA,WAAW,EAAEW,eADS;AAEtBZ,IAAAA,UAAU,EAAEwB,cAFU;AAGtBzB,IAAAA,SAAS,EAAEmC,aAHW;AAItB7B,IAAAA,CAAC,EAAEZ,OAJmB;AAKtBe,IAAAA,CAAC,EAAEZ;AALmB,GAAD,CAAvB,CA7E+C,CAmF3C;;AAEJc,EAAAA,cAAc,CAACa,OAAf,GAAyBqB,WAAzB;AACAjC,EAAAA,YAAY,CAACY,OAAb,GAAuBsB,SAAvB;AACA,SAAO,aAAaxE,KAAK,CAACyE,aAAN,CAAoBzE,KAAK,CAAC0E,QAA1B,EAAoC,IAApC,EAA0C,aAAa1E,KAAK,CAACyE,aAAN,CAAoBrE,UAApB,EAAgC;AACzG4B,IAAAA,CAAC,EAAEC,QAAQ,GAAGsC,WAAW,CAACpD,EAD+E;AAEzGgB,IAAAA,CAAC,EAAEC,QAAQ,GAAGmC,WAAW,CAACjD,EAF+E;AAGzGH,IAAAA,EAAE,EAAEC,OAAO,GAAGoD,SAAS,CAACrD,EAHiF;AAIzGG,IAAAA,EAAE,EAAEC,OAAO,GAAGiD,SAAS,CAAClD;AAJiF,GAAhC,EAKxEL,QALwE,CAAvD,EAKNsD,WAAW,CAACI,UAAZ,IAA0B,aAAa3E,KAAK,CAACyE,aAAN,CAAoB,MAApB,EAA4B;AAC/E3C,IAAAA,KAAK,EAAEA,KADwE;AAE/EN,IAAAA,MAAM,EAAEA,MAFuE;AAG/EoD,IAAAA,WAAW,EAAEL,WAAW,CAACM,QAHsD;AAI/EC,IAAAA,SAAS,EAAEP,WAAW,CAACQ,OAJwD;AAK/ExE,IAAAA,IAAI,EAAE;AALyE,GAA5B,CALjC,EAWhBS,cAAc,IAAI,aAAahB,KAAK,CAACyE,aAAN,CAAoB,QAApB,EAA8BtF,QAAQ,CAAC;AACxE6F,IAAAA,EAAE,EAAE/C,QADoE;AAExEgD,IAAAA,EAAE,EAAE7C,QAFoE;AAGxE8C,IAAAA,SAAS,EAAE,eAAeX,WAAW,CAACpD,EAA3B,GAAgC,GAAhC,GAAsCoD,WAAW,CAACjD,EAAlD,GAAuD,GAHM;AAIxEsD,IAAAA,WAAW,EAAEL,WAAW,CAACM,QAJ+C;AAKxEC,IAAAA,SAAS,EAAEP,WAAW,CAACQ,OALiD;AAMxEI,IAAAA,WAAW,EAAEZ,WAAW,CAACa,SAN+C;AAOxEC,IAAAA,YAAY,EAAEd,WAAW,CAACa,SAP8C;AAQxEE,IAAAA,WAAW,EAAEf,WAAW,CAACM,QAR+C;AASxEU,IAAAA,UAAU,EAAEhB,WAAW,CAACQ,OATgD;AAUxES,IAAAA,MAAM,EAAEjB,WAAW,CAACI,UAAZ,GAAyB,UAAzB,GAAsC;AAV0B,GAAD,EAWtEtE,sBAXsE,EAW9CwB,sBAX8C,CAAtC,CAXf,EAsBiC2C,SAAS,CAACG,UAAV,IAAwB,aAAa3E,KAAK,CAACyE,aAAN,CAAoB,MAApB,EAA4B;AACpH3C,IAAAA,KAAK,EAAEA,KAD6G;AAEpHN,IAAAA,MAAM,EAAEA,MAF4G;AAGpHoD,IAAAA,WAAW,EAAEJ,SAAS,CAACK,QAH6F;AAIpHC,IAAAA,SAAS,EAAEN,SAAS,CAACO,OAJ+F;AAKpHxE,IAAAA,IAAI,EAAE;AAL8G,GAA5B,CAtBtE,EA4BhBO,YAAY,IAAI,aAAad,KAAK,CAACyE,aAAN,CAAoB,QAApB,EAA8BtF,QAAQ,CAAC;AACtE6F,IAAAA,EAAE,EAAE/C,QAAQ,GAAGsC,WAAW,CAACpD,EAAvB,GAA4BC,OADsC;AAEtE6D,IAAAA,EAAE,EAAE7C,QAAQ,GAAGmC,WAAW,CAACjD,EAAvB,GAA4BC,OAFsC;AAGtE2D,IAAAA,SAAS,EAAE,eAAeV,SAAS,CAACrD,EAAzB,GAA8B,GAA9B,GAAoCqD,SAAS,CAAClD,EAA9C,GAAmD,GAHQ;AAItEsD,IAAAA,WAAW,EAAEJ,SAAS,CAACK,QAJ+C;AAKtEC,IAAAA,SAAS,EAAEN,SAAS,CAACO,OALiD;AAMtEI,IAAAA,WAAW,EAAEX,SAAS,CAACY,SAN+C;AAOtEC,IAAAA,YAAY,EAAEb,SAAS,CAACY,SAP8C;AAQtEE,IAAAA,WAAW,EAAEd,SAAS,CAACK,QAR+C;AAStEU,IAAAA,UAAU,EAAEf,SAAS,CAACO,OATgD;AAUtES,IAAAA,MAAM,EAAEhB,SAAS,CAACG,UAAV,GAAuB,UAAvB,GAAoC;AAV0B,GAAD,EAWpEtE,sBAXoE,EAW5CoB,oBAX4C,CAAtC,CA5Bb,CAApB;AAwCD;AACDd,kBAAkB,CAAC8E,SAAnB,GAA+B;AAC7B3D,EAAAA,KAAK,EAAE5C,GAAG,CAACwG,MAAJ,CAAWC,UADW;AAE7BnE,EAAAA,MAAM,EAAEtC,GAAG,CAACwG,MAAJ,CAAWC,UAFU;AAG7B1E,EAAAA,QAAQ,EAAE/B,GAAG,CAAC0G,IAAJ,CAASD,UAHU;AAI7B7E,EAAAA,YAAY,EAAE5B,GAAG,CAAC2G,IAJW;AAK7B7E,EAAAA,cAAc,EAAE9B,GAAG,CAAC2G,IALS;AAM7BjE,EAAAA,WAAW,EAAE1C,GAAG,CAAC4G,IANY;AAO7BnE,EAAAA,UAAU,EAAEzC,GAAG,CAAC4G,IAPa;AAQ7BpE,EAAAA,SAAS,EAAExC,GAAG,CAAC4G;AARc,CAA/B","sourcesContent":["import _pt from \"prop-types\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/* eslint-disable react/jsx-handler-names */\nimport React, { useCallback, useRef } from 'react';\nimport useDrag from '@visx/drag/lib/useDrag';\nimport Annotation from './Annotation';\nvar defaultDragHandleProps = {\n  r: 10,\n  fill: 'transparent',\n  stroke: '#777',\n  strokeDasharray: '4,2',\n  strokeWidth: 2\n};\nexport default function EditableAnnotation(_ref) {\n  var _ref$canEditLabel = _ref.canEditLabel,\n      canEditLabel = _ref$canEditLabel === void 0 ? true : _ref$canEditLabel,\n      _ref$canEditSubject = _ref.canEditSubject,\n      canEditSubject = _ref$canEditSubject === void 0 ? true : _ref$canEditSubject,\n      children = _ref.children,\n      _ref$dx = _ref.dx,\n      labelDx = _ref$dx === void 0 ? 0 : _ref$dx,\n      _ref$dy = _ref.dy,\n      labelDy = _ref$dy === void 0 ? 0 : _ref$dy,\n      height = _ref.height,\n      labelDragHandleProps = _ref.labelDragHandleProps,\n      onDragEnd = _ref.onDragEnd,\n      onDragMove = _ref.onDragMove,\n      onDragStart = _ref.onDragStart,\n      subjectDragHandleProps = _ref.subjectDragHandleProps,\n      width = _ref.width,\n      _ref$x = _ref.x,\n      subjectX = _ref$x === void 0 ? 0 : _ref$x,\n      _ref$y = _ref.y,\n      subjectY = _ref$y === void 0 ? 0 : _ref$y;\n  // chicken before the egg, we need these to reference drag state\n  // in drag callbacks which are defined before useDrag() state is available\n  var subjectDragRef = useRef();\n  var labelDragRef = useRef();\n  var handleDragStart = useCallback(function (_ref2) {\n    var event = _ref2.event;\n\n    if (onDragStart) {\n      var _subjectDragRef$curre, _subjectDragRef$curre2, _subjectDragRef$curre3, _subjectDragRef$curre4, _labelDragRef$current, _labelDragRef$current2, _labelDragRef$current3, _labelDragRef$current4;\n\n      onDragStart({\n        event: event,\n        x: subjectX + ((_subjectDragRef$curre = (_subjectDragRef$curre2 = subjectDragRef.current) == null ? void 0 : _subjectDragRef$curre2.dx) != null ? _subjectDragRef$curre : 0),\n        y: subjectY + ((_subjectDragRef$curre3 = (_subjectDragRef$curre4 = subjectDragRef.current) == null ? void 0 : _subjectDragRef$curre4.dy) != null ? _subjectDragRef$curre3 : 0),\n        dx: labelDx + ((_labelDragRef$current = (_labelDragRef$current2 = labelDragRef.current) == null ? void 0 : _labelDragRef$current2.dx) != null ? _labelDragRef$current : 0),\n        dy: labelDy + ((_labelDragRef$current3 = (_labelDragRef$current4 = labelDragRef.current) == null ? void 0 : _labelDragRef$current4.dy) != null ? _labelDragRef$current3 : 0)\n      });\n    }\n  }, [labelDx, labelDy, onDragStart, subjectX, subjectY]);\n  var handleDragMove = useCallback(function (_ref3) {\n    var event = _ref3.event;\n\n    if (onDragMove) {\n      var _subjectDragRef$curre5, _subjectDragRef$curre6, _subjectDragRef$curre7, _subjectDragRef$curre8, _labelDragRef$current5, _labelDragRef$current6, _labelDragRef$current7, _labelDragRef$current8;\n\n      onDragMove({\n        event: event,\n        x: subjectX + ((_subjectDragRef$curre5 = (_subjectDragRef$curre6 = subjectDragRef.current) == null ? void 0 : _subjectDragRef$curre6.dx) != null ? _subjectDragRef$curre5 : 0),\n        y: subjectY + ((_subjectDragRef$curre7 = (_subjectDragRef$curre8 = subjectDragRef.current) == null ? void 0 : _subjectDragRef$curre8.dy) != null ? _subjectDragRef$curre7 : 0),\n        dx: labelDx + ((_labelDragRef$current5 = (_labelDragRef$current6 = labelDragRef.current) == null ? void 0 : _labelDragRef$current6.dx) != null ? _labelDragRef$current5 : 0),\n        dy: labelDy + ((_labelDragRef$current7 = (_labelDragRef$current8 = labelDragRef.current) == null ? void 0 : _labelDragRef$current8.dy) != null ? _labelDragRef$current7 : 0)\n      });\n    }\n  }, [labelDx, labelDy, onDragMove, subjectX, subjectY]);\n  var handleDragEnd = useCallback(function (_ref4) {\n    var event = _ref4.event;\n\n    if (onDragEnd) {\n      var _subjectDragRef$curre9, _subjectDragRef$curre10, _subjectDragRef$curre11, _subjectDragRef$curre12, _labelDragRef$current9, _labelDragRef$current10, _labelDragRef$current11, _labelDragRef$current12;\n\n      onDragEnd({\n        event: event,\n        x: subjectX + ((_subjectDragRef$curre9 = (_subjectDragRef$curre10 = subjectDragRef.current) == null ? void 0 : _subjectDragRef$curre10.dx) != null ? _subjectDragRef$curre9 : 0),\n        y: subjectY + ((_subjectDragRef$curre11 = (_subjectDragRef$curre12 = subjectDragRef.current) == null ? void 0 : _subjectDragRef$curre12.dy) != null ? _subjectDragRef$curre11 : 0),\n        dx: labelDx + ((_labelDragRef$current9 = (_labelDragRef$current10 = labelDragRef.current) == null ? void 0 : _labelDragRef$current10.dx) != null ? _labelDragRef$current9 : 0),\n        dy: labelDy + ((_labelDragRef$current11 = (_labelDragRef$current12 = labelDragRef.current) == null ? void 0 : _labelDragRef$current12.dy) != null ? _labelDragRef$current11 : 0)\n      });\n    }\n  }, [labelDx, labelDy, onDragEnd, subjectX, subjectY]);\n  var subjectDrag = useDrag({\n    onDragStart: handleDragStart,\n    onDragMove: handleDragMove,\n    onDragEnd: handleDragEnd,\n    x: subjectX,\n    y: subjectY\n  });\n  var labelDrag = useDrag({\n    onDragStart: handleDragStart,\n    onDragMove: handleDragMove,\n    onDragEnd: handleDragEnd,\n    x: labelDx,\n    y: labelDy\n  }); // enable referencing these in the callbacks defined before useDrag is called\n\n  subjectDragRef.current = subjectDrag;\n  labelDragRef.current = labelDrag;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Annotation, {\n    x: subjectX + subjectDrag.dx,\n    y: subjectY + subjectDrag.dy,\n    dx: labelDx + labelDrag.dx,\n    dy: labelDy + labelDrag.dy\n  }, children), subjectDrag.isDragging && /*#__PURE__*/React.createElement(\"rect\", {\n    width: width,\n    height: height,\n    onMouseMove: subjectDrag.dragMove,\n    onMouseUp: subjectDrag.dragEnd,\n    fill: \"transparent\"\n  }), canEditSubject && /*#__PURE__*/React.createElement(\"circle\", _extends({\n    cx: subjectX,\n    cy: subjectY,\n    transform: \"translate(\" + subjectDrag.dx + \",\" + subjectDrag.dy + \")\",\n    onMouseMove: subjectDrag.dragMove,\n    onMouseUp: subjectDrag.dragEnd,\n    onMouseDown: subjectDrag.dragStart,\n    onTouchStart: subjectDrag.dragStart,\n    onTouchMove: subjectDrag.dragMove,\n    onTouchEnd: subjectDrag.dragEnd,\n    cursor: subjectDrag.isDragging ? 'grabbing' : 'grab'\n  }, defaultDragHandleProps, subjectDragHandleProps)), labelDrag.isDragging && /*#__PURE__*/React.createElement(\"rect\", {\n    width: width,\n    height: height,\n    onMouseMove: labelDrag.dragMove,\n    onMouseUp: labelDrag.dragEnd,\n    fill: \"transparent\"\n  }), canEditLabel && /*#__PURE__*/React.createElement(\"circle\", _extends({\n    cx: subjectX + subjectDrag.dx + labelDx,\n    cy: subjectY + subjectDrag.dy + labelDy,\n    transform: \"translate(\" + labelDrag.dx + \",\" + labelDrag.dy + \")\",\n    onMouseMove: labelDrag.dragMove,\n    onMouseUp: labelDrag.dragEnd,\n    onMouseDown: labelDrag.dragStart,\n    onTouchStart: labelDrag.dragStart,\n    onTouchMove: labelDrag.dragMove,\n    onTouchEnd: labelDrag.dragEnd,\n    cursor: labelDrag.isDragging ? 'grabbing' : 'grab'\n  }, defaultDragHandleProps, labelDragHandleProps)));\n}\nEditableAnnotation.propTypes = {\n  width: _pt.number.isRequired,\n  height: _pt.number.isRequired,\n  children: _pt.node.isRequired,\n  canEditLabel: _pt.bool,\n  canEditSubject: _pt.bool,\n  onDragStart: _pt.func,\n  onDragMove: _pt.func,\n  onDragEnd: _pt.func\n};"]},"metadata":{},"sourceType":"module"}