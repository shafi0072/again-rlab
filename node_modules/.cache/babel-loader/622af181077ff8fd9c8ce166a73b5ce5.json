{"ast":null,"code":"import _objectSpread from\"F:/Rlab/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"F:/Rlab/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from'react';import'./Login.css';import'../../responsive.css';import logo from'../../Resorces/logo_RLAB.png';import{userContext}from'../../App';import firebase from\"firebase/app\";import\"firebase/auth\";import firebaseConfig from'./firebase.config';import{Link,useHistory,useLocation}from'react-router-dom';import{useEffect}from'react';import'firebase/firestore';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";firebase.initializeApp(firebaseConfig);if(!firebase.apps.length){firebase.initializeApp({apiKey:\"AIzaSyA47b6Rx0RioZApSMcyDooUmOpQFFs9WLE\",authDomain:\"test1-68872.firebaseapp.com\",projectId:\"test1-68872\",storageBucket:\"test1-68872.appspot.com\",messagingSenderId:\"504703093399\",appId:\"1:504703093399:web:50a89636d428ac8bd2f7d2\"});}else{firebase.app();// if already initialized, use that one\n}var db=firebase.firestore();var Login=function Login(){var history=useHistory();var location=useLocation();var _ref=location.state||{from:{pathname:\"/\"}},from=_ref.from;var _useState=useState({login:true,signUp:false}),_useState2=_slicedToArray(_useState,2),click=_useState2[0],setClick=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userData=_useState4[0],setUserData=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var handleSignUp=function handleSignUp(){var newClick=_objectSpread({},click);newClick.login=false;newClick.signUp=true;setClick(newClick);};var handleLogin=function handleLogin(){var newClick=_objectSpread({},click);newClick.login=true;newClick.signUp=false;setClick(newClick);};var _useContext=useContext(userContext),_useContext2=_slicedToArray(_useContext,2),user=_useContext2[0],setUser=_useContext2[1];var handleOnChange=function handleOnChange(e){var newUserInfo=_objectSpread({},user);newUserInfo[e.target.name]=e.target.value;setUser(newUserInfo);};var handleCreateAccount=function handleCreateAccount(e){firebase.auth().createUserWithEmailAndPassword(user.email,user.ConfirmPassword).then(function(res){var newUserInfo=_objectSpread({},user);newUserInfo.error=\"\";newUserInfo.success=true;setUser(newUserInfo);updateUserInfo(user.name);}).catch(function(error){var newUserInfo=_objectSpread({},user);newUserInfo.error=error.message;newUserInfo.success=false;setUser(newUserInfo);});e.preventDefault();};var handleSubmitLogin=function handleSubmitLogin(e){firebase.auth().signInWithEmailAndPassword(user.email,user.ConfirmPassword).then(function(res){var newUserInfo=_objectSpread({},user);newUserInfo.email=res.user.email;newUserInfo.error=\"\";newUserInfo.success=true;setUser(newUserInfo);history.replace(from);if(res.user.email==='safi29317@gmail.com'){var newUser=_objectSpread({},user);newUser.admin=true;newUser.viewer=false;setUser(newUser);}else if(userData.Role==='admin'){var _newUser=_objectSpread({},user);_newUser.admin=true;_newUser.viewer=false;setUser(_newUser);}else if(userData.Role==='oparetors'){var _newUser2=_objectSpread({},user);_newUser2.admin=true;_newUser2.viewer=false;setUser(_newUser2);}else{var _newUser3=_objectSpread({},user);_newUser3.admin=false;_newUser3.viewer=true;setUser(_newUser3);}}).catch(function(error){var newUserInfo=_objectSpread({},user);newUserInfo.error=error.message;newUserInfo.success=false;setUser(newUserInfo);});e.preventDefault();};var updateUserInfo=function updateUserInfo(name){var user=firebase.auth().currentUser;user.updateProfile({displayName:name}).then(function(){}).catch(function(error){});};function arrayFunc(arr,key){var resultArray=[];for(var i=0;i<arr.length;i++){if(arr[i].email===key){resultArray=arr[i];}}return resultArray;};useEffect(function(){var userDb=db.collection(\"user\").onSnapshot(function(querySnapshot){var getDataFirebase=[];querySnapshot.forEach(function(doc){getDataFirebase.push(_objectSpread(_objectSpread({},doc.data()),{},{key:doc.id}));});if(getDataFirebase.length>0){var functionalArray=arrayFunc(getDataFirebase,user.email);setUserData(functionalArray);setLoading(false);}});return userDb;},[user]);return/*#__PURE__*/_jsxs(\"div\",{className:\"background d-flex justify-content-center p-5\",children:[click.login&&/*#__PURE__*/_jsxs(\"div\",{className:\"loginBox\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"\",style:{width:'30%'}})}),/*#__PURE__*/_jsx(\"div\",{className:\"loginText mt-5 text-center\",children:/*#__PURE__*/_jsx(\"h2\",{style:{fontFamily:\"'Raleway', sans-serif\"},children:\"Log In\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:user.error}),user.success&&/*#__PURE__*/_jsx(\"p\",{className:\"text-success\",children:\"Log in successfull\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleSubmitLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"mb-3 row\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-10 input-box\",children:/*#__PURE__*/_jsx(\"input\",{onChange:handleOnChange,type:\"text\",class:\"form-control\",id:\"staticEmail\",name:\"email\",placeholder:\"User email\"})})}),/*#__PURE__*/_jsx(\"div\",{class:\"mb-3 row\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-10 input-box\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:handleOnChange,class:\"form-control\",id:\"inputPassword\",name:\"ConfirmPassword\",placeholder:\"Password\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"remember\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"rememberCheckbox\",type:\"checkbox\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"Remember Me\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"forgotPass\",children:/*#__PURE__*/_jsx(Link,{to:\"/restPassword\",className:\"forgotTxt\",children:\"Forgot Password\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"form-control bg-primary text-light\",type:\"submit\",children:\"Log In\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"creatTxt\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account?\",/*#__PURE__*/_jsx(\"span\",{onClick:handleSignUp,className:\"creatAccount\",children:\"Create an account\"})]})})]})]}),click.signUp&&/*#__PURE__*/_jsxs(\"div\",{className:\"loginBox signup\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"\",style:{width:'30%'}})}),/*#__PURE__*/_jsx(\"div\",{className:\"loginText mt-5 text-center\",children:/*#__PURE__*/_jsx(\"h2\",{style:{fontFamily:\"'Raleway', sans-serif\"},children:\"Sign Up\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:user.error}),user.success&&/*#__PURE__*/_jsx(\"p\",{className:\"text-success\",children:\"SignUp SuccessFull\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleCreateAccount,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"mb-3 row\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-10 input-box\",children:/*#__PURE__*/_jsx(\"input\",{onChange:handleOnChange,type:\"text\",class:\"form-control\",id:\"staticEmail\",placeholder:\"First Name\",name:\"name\"})})}),/*#__PURE__*/_jsx(\"div\",{class:\"mb-3 row\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-10 input-box\",children:/*#__PURE__*/_jsx(\"input\",{onChange:handleOnChange,type:\"text\",class:\"form-control\",id:\"staticEmail\",placeholder:\"Last Name\",name:\"name\"})})}),/*#__PURE__*/_jsx(\"div\",{class:\"mb-3 row\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-10 input-box\",children:/*#__PURE__*/_jsx(\"input\",{onChange:handleOnChange,type:\"email\",class:\"form-control\",id:\"staticEmail\",placeholder:\"Email\",name:\"email\"})})}),/*#__PURE__*/_jsx(\"div\",{class:\"mb-3 row\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-10 input-box\",children:/*#__PURE__*/_jsx(\"input\",{onChange:handleOnChange,type:\"password\",class:\"form-control\",id:\"inputPassword\",name:\"ConfirmPassword\",placeholder:\"Password\"})})}),/*#__PURE__*/_jsx(\"div\",{class:\"mb-3 row\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-sm-10 input-box\",children:/*#__PURE__*/_jsx(\"input\",{onChange:handleOnChange,type:\"password\",class:\"form-control\",id:\"inputPassword\",name:\"ConfirmPassword\",placeholder:\"Confirm Password\"})})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"form-control bg-primary text-light\",type:\"submit\",children:\"Create\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"creatTxt\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account?\",/*#__PURE__*/_jsx(\"span\",{onClick:handleLogin,className:\"creatAccount\",children:\"Log In\"})]})})]})]})]});};export default Login;","map":{"version":3,"sources":["F:/Rlab/client/src/Components/Login/Login.js"],"names":["React","useContext","useState","logo","userContext","firebase","firebaseConfig","Link","useHistory","useLocation","useEffect","initializeApp","apps","length","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","db","firestore","Login","history","location","state","from","pathname","login","signUp","click","setClick","userData","setUserData","loading","setLoading","handleSignUp","newClick","handleLogin","user","setUser","handleOnChange","e","newUserInfo","target","name","value","handleCreateAccount","auth","createUserWithEmailAndPassword","email","ConfirmPassword","then","res","error","success","updateUserInfo","catch","message","preventDefault","handleSubmitLogin","signInWithEmailAndPassword","replace","newUser","admin","viewer","Role","currentUser","updateProfile","displayName","arrayFunc","arr","key","resultArray","i","userDb","collection","onSnapshot","querySnapshot","getDataFirebase","forEach","doc","push","data","id","functionalArray","width","fontFamily"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\r\n\r\nimport './Login.css';\r\nimport '../../responsive.css';\r\nimport logo from '../../Resorces/logo_RLAB.png'\r\nimport { userContext } from '../../App';\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport firebaseConfig from './firebase.config';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { useEffect } from 'react';\r\nimport 'firebase/firestore';\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nif (!firebase.apps.length) {\r\n    firebase.initializeApp({\r\n        apiKey: \"AIzaSyA47b6Rx0RioZApSMcyDooUmOpQFFs9WLE\",\r\n        authDomain: \"test1-68872.firebaseapp.com\",\r\n        projectId: \"test1-68872\",\r\n        storageBucket: \"test1-68872.appspot.com\",\r\n        messagingSenderId: \"504703093399\",\r\n        appId: \"1:504703093399:web:50a89636d428ac8bd2f7d2\"\r\n    });\r\n }else {\r\n    firebase.app(); // if already initialized, use that one\r\n }\r\n\r\nconst db = firebase.firestore();\r\n\r\nconst Login = () => {\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n\r\n    \r\n\r\n    const { from } = location.state || { from: { pathname: \"/\" } };\r\n\r\n    const [click, setClick] = useState({\r\n        login: true,\r\n        signUp: false\r\n    });\r\n    const [userData, setUserData] = useState([]);\r\n    const [loading, setLoading] = useState(true)\r\n    const handleSignUp = () => {\r\n        const newClick = {...click}\r\n        newClick.login = false;\r\n        newClick.signUp  = true;\r\n        setClick(newClick)\r\n    }\r\n    \r\n    const handleLogin = () => {\r\n        const newClick = {...click}\r\n        newClick.login = true;\r\n        newClick.signUp  = false;\r\n        setClick(newClick)\r\n    };\r\n    const [user, setUser] = useContext(userContext);\r\n    const handleOnChange = (e) => {\r\n        const newUserInfo = {...user}\r\n        newUserInfo[e.target.name] = e.target.value;\r\n        setUser(newUserInfo);\r\n        \r\n    }\r\n    const handleCreateAccount = (e) => {\r\n        firebase.auth().createUserWithEmailAndPassword(user.email, user.ConfirmPassword)\r\n        .then(res => {\r\n            const newUserInfo = {...user};\r\n            newUserInfo.error = \"\";\r\n            newUserInfo.success = true;\r\n            setUser(newUserInfo);\r\n            updateUserInfo(user.name)\r\n        }\r\n        )\r\n        .catch(error => {\r\n            const newUserInfo = {\r\n                ...user\r\n            };\r\n            newUserInfo.error = error.message;\r\n            newUserInfo.success = false;\r\n            setUser(newUserInfo)\r\n\r\n        });\r\n        e.preventDefault()\r\n    }\r\n   const handleSubmitLogin = (e) => {\r\n    firebase.auth().signInWithEmailAndPassword(user.email, user.ConfirmPassword)\r\n    .then(res => {\r\n\r\n        const newUserInfo = {\r\n            ...user\r\n        };\r\n        newUserInfo.email = res.user.email;\r\n        newUserInfo.error = \"\";\r\n        newUserInfo.success = true;\r\n        setUser(newUserInfo);\r\n        history.replace(from);\r\n    \r\n    if(res.user.email === 'safi29317@gmail.com'){\r\n        const newUser = {...user}\r\n        newUser.admin = true;\r\n        newUser.viewer = false;\r\n        setUser(newUser);\r\n    }else if(userData.Role === 'admin'){\r\n        const newUser = {...user}\r\n        newUser.admin = true;\r\n        newUser.viewer = false;\r\n        setUser(newUser);\r\n    }\r\n    else if(userData.Role === 'oparetors'){\r\n        const newUser = {...user}\r\n        newUser.admin = true;\r\n        newUser.viewer = false;\r\n        setUser(newUser);\r\n    }\r\n    else{\r\n        const newUser = {...user}\r\n        newUser.admin = false;\r\n        newUser.viewer = true;\r\n        setUser(newUser);\r\n    }\r\n    \r\n        \r\n    })\r\n    .catch(function (error) {\r\n        const newUserInfo = {\r\n            ...user\r\n        };\r\n        newUserInfo.error = error.message;\r\n        newUserInfo.success = false;\r\n        setUser(newUserInfo);\r\n        \r\n    })\r\n    \r\n    \r\n    e.preventDefault()\r\n   }\r\n   const updateUserInfo = name => {\r\n    const user = firebase.auth().currentUser;\r\n\r\n    user.updateProfile({\r\n    displayName: name,\r\n    }).then(function() {\r\n   \r\n    }).catch(function(error) {\r\n    \r\n    });\r\n}\r\nfunction arrayFunc(arr,key) {\r\n    let resultArray = [];\r\n    for(let i = 0; i < arr.length; i++){\r\n        if(arr[i].email === key){\r\n            resultArray = arr[i];\r\n        }\r\n        \r\n    }\r\n   \r\n    return resultArray\r\n};\r\nuseEffect(() => {\r\n    const userDb =  db.collection(\"user\").onSnapshot((querySnapshot) => {\r\n        const getDataFirebase = [];\r\n        querySnapshot.forEach((doc) => {\r\n          getDataFirebase.push({...doc.data(), key:doc.id});\r\n        });\r\n        \r\n        if(getDataFirebase.length > 0){\r\n            const functionalArray = arrayFunc(getDataFirebase, user.email)\r\n            setUserData(functionalArray);\r\n          \r\n            setLoading(false)\r\n           \r\n        }\r\n    });\r\n    return userDb;\r\n}, [user]);\r\n\r\n\r\n\r\n    return (\r\n        <div className='background d-flex justify-content-center p-5'>\r\n\r\n            {click.login && <div className=\"loginBox\">\r\n                <div className=\"text-center\">\r\n                    <img\r\n                        src={logo}\r\n                        alt=\"\"\r\n                        style={{\r\n                            width: '30%'\r\n                        }}/>\r\n                </div>\r\n                <div className=\"loginText mt-5 text-center\">\r\n                    <h2\r\n                        style={{\r\n                            fontFamily: \"'Raleway', sans-serif\"\r\n                        }}>Log In</h2>\r\n                </div>\r\n                <p className=\"text-danger\">{user.error}</p>\r\n                {user.success && <p className='text-success'>Log in successfull</p>}\r\n                <form action=\"\" onSubmit={handleSubmitLogin}>\r\n                <div className=\"\">\r\n                    <div class=\"mb-3 row\">\r\n\r\n                        <div class=\"col-sm-10 input-box\">\r\n                            <input\r\n                                onChange={handleOnChange}\r\n                                type=\"text\"\r\n                                class=\"form-control\"\r\n                                id=\"staticEmail\"\r\n                                name=\"email\"\r\n                                placeholder=\"User email\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"mb-3 row\">\r\n                        <div class=\"col-sm-10 input-box\">\r\n                            <input\r\n                                type=\"password\"\r\n                                onChange={handleOnChange}\r\n                                class=\"form-control\"\r\n                                id=\"inputPassword\"\r\n                                name=\"ConfirmPassword\"\r\n                                placeholder=\"Password\"/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"remember\">\r\n                    <input className=\"rememberCheckbox\" type=\"checkbox\"/>\r\n                    <label htmlFor=\"\">Remember Me</label>\r\n                </div>\r\n                <div className=\"forgotPass\">\r\n                    <Link to='/restPassword' className=\"forgotTxt\">Forgot Password</Link>\r\n                </div>\r\n                <div>\r\n                    <button className=\"form-control bg-primary text-light\" type='submit'>Log In</button>\r\n                </div>\r\n                <div className=\"creatTxt\">\r\n                    <p>Don't have an account?<span onClick={handleSignUp} className=\"creatAccount\">Create an account</span>\r\n                    </p>\r\n                </div>\r\n                \r\n                </form>\r\n            </div>}\r\n\r\n            {click.signUp && <div className=\"loginBox signup\">\r\n                <div className=\"text-center\">\r\n                    <img\r\n                        src={logo}\r\n                        alt=\"\"\r\n                        style={{\r\n                            width: '30%'\r\n                        }}/>\r\n                </div>\r\n                <div className=\"loginText mt-5 text-center\">\r\n                    <h2\r\n                        style={{\r\n                            fontFamily: \"'Raleway', sans-serif\"\r\n                        }}>Sign Up</h2>\r\n                </div>\r\n                <p className='text-danger'>{user.error}</p>\r\n                {user.success && <p className='text-success'>SignUp SuccessFull</p>}\r\n                <form action=\"\" onSubmit={handleCreateAccount}>\r\n                <div className=\"\">\r\n                    <div class=\"mb-3 row\">\r\n\r\n                        <div class=\"col-sm-10 input-box\">\r\n                            <input\r\n                                onChange={handleOnChange}\r\n                                type=\"text\"\r\n                                class=\"form-control\"\r\n                                id=\"staticEmail\"\r\n                                placeholder=\"First Name\"\r\n                                name=\"name\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"mb-3 row\">\r\n\r\n                        <div class=\"col-sm-10 input-box\">\r\n                            <input\r\n                            onChange={handleOnChange}\r\n                                type=\"text\"\r\n                                class=\"form-control\"\r\n                                id=\"staticEmail\"\r\n                                placeholder=\"Last Name\"\r\n                                name=\"name\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"mb-3 row\">\r\n\r\n                        <div class=\"col-sm-10 input-box\">\r\n                            <input\r\n                            onChange={handleOnChange}\r\n                                type=\"email\"\r\n                                class=\"form-control\"\r\n                                id=\"staticEmail\"\r\n                                placeholder=\"Email\"\r\n                                name=\"email\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"mb-3 row\">\r\n                        <div class=\"col-sm-10 input-box\">\r\n                            <input\r\n                            onChange={handleOnChange}\r\n                                type=\"password\"\r\n                                class=\"form-control\"\r\n                                id=\"inputPassword\"\r\n                                name=\"ConfirmPassword\"\r\n                                placeholder=\"Password\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"mb-3 row\">\r\n                        <div class=\"col-sm-10 input-box\">\r\n                            <input\r\n                            onChange={handleOnChange}\r\n                                type=\"password\"\r\n                                class=\"form-control\"\r\n                                id=\"inputPassword\"\r\n                                name=\"ConfirmPassword\"\r\n                                placeholder=\"Confirm Password\"/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div>\r\n                    <button className=\"form-control bg-primary text-light\" type='submit'>Create</button>\r\n                </div>\r\n                <div className=\"creatTxt\">\r\n                    <p>Already have an account?<span onClick={handleLogin} className=\"creatAccount\">Log In</span>\r\n                    </p>\r\n                </div>\r\n                \r\n                </form>\r\n            </div>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}